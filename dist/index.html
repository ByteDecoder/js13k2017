<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>JS13K 2017 boilerplate</title><style>
body{margin:0;overflow:hidden;background:#111;color:#ccc}#canvas{position:fixed;top:50%;bottom:0;left:50%;right:0;width:768px;height:512px;transform:translate(-50%,-30%);image-rendering:optimizeSpeed;image-rendering:-moz-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:-o-crisp-edges;image-rendering:pixelated;-ms-interpolation-mode:nearest-neighbor;cursor:none;margin:auto}
</style></head><body><canvas id="canvas"></canvas><script>
var Stats=function(){function t(t){return n.K(t.b),t}function e(t){for(var e=0;e<n.T.length;e++)n.T[e].g.D=e===t?"block":"none";o=t}var o=0,n=document.k("div");n.g.S="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.A("click",function(t){t.C(),e(++o%n.T.length)},!1);var s=(performance||Date).now(),r=s,f=0,a=t(new Stats.P("FPS","#0ff","#002")),i=t(new Stats.P("MS","#0f0","#020"));if(self.I&&self.I.O)var c=t(new Stats.P("MB","#f08","#201"));return e(0),{U:16,b:n,X:t,Y:e,B:function(){s=(performance||Date).now()},F:function(){f++;var t=(performance||Date).now();if(i.N(t-s,200),t>r+1e3&&(a.N(1e3*f/(t-r),100),r=t,f=0,c)){var e=performance.O;c.N(e.L/1048576,e.G/1048576)}return t},N:function(){s=this.F()},H:n,V:e}};Stats.P=function(t,e,o){var n=1/0,s=0,r=Math.round,f=r(window.j||1),a=80*f,i=48*f,c=3*f,_=2*f,h=3*f,u=15*f,l=74*f,v=30*f,m=document.k("canvas");m.z=a,m.W=i,m.g.S="width:80px;height:48px";var d=m.J("2d");return d.Q="bold "+9*f+"px Helvetica,Arial,sans-serif",d.Z="top",d.$=o,d.l(0,0,a,i),d.$=e,d.tt(t,c,_),d.l(h,u,l,v),d.$=o,d.et=.9,d.l(h,u,l,v),{b:m,N:function(i,x){n=Math.min(n,i),s=Math.max(s,i),d.$=o,d.et=1,d.l(0,0,a,u),d.$=e,d.tt(r(i)+" "+t+" ("+r(n)+"-"+r(s)+")",c,_),d.ot(m,h+f,u,l-f,v,h,u,l-f,v),d.l(h+l-f,u,f,v),d.$=o,d.et=.9,d.l(h+l-f,u,f,r((1-i/x)*v))}}},"object"==typeof module&&(module.nt=Stats),function(){function e(t){return Math.sin(6.283184*t)}function o(t){return.00390625*Math.pow(1.059463094,t-128)}function n(t,e){setTimeout(function(){var o=new Uint8Array(t*M*2),n=o.length-2,s=function(){for(var t=new Date,r=0;n>=0;)if(o[n]=0,o[n+1]=128,n-=2,(r+=1)%1e3==0&&new Date-t>q)return void setTimeout(s,0);setTimeout(function(){e(o)},0)};setTimeout(s,0)},0)}function s(t,e,o,n,s){var r=o.st*n>>1,f=o.rt/255,a=0,i=function(){for(var o=new Date,n=0;a<e-r;){var c=4*a,_=4*(a+r),h=t[_]+(t[_+1]<<8)+(t[c+2]+(t[c+3]<<8)-32768)*f;if(t[_]=255&h,t[_+1]=h>>8&255,h=t[_+2]+(t[_+3]<<8)+(t[c]+(t[c+1]<<8)-32768)*f,t[_+2]=255&h,t[_+3]=h>>8&255,++a,(n+=1)%1e3==0&&new Date-o>q)return void setTimeout(i,0)}setTimeout(s,0)};setTimeout(i,0)}function r(){E=k,h(1,1,17,17,27),h(2,2,15,15,21),console.log(N[k+T+5])}function f(t){N.fill(t,E,E+131072)}function a(t,e,o){e|=0,o|=0,(t|=0)>0&&t<T&&e>0&&e<D&&(N[E+(e*T+t)]=o)}function i(t,e,o,n,s){var r,f,i=(n|=0)-(e|=0),c=(o|=0)-(t|=0);if(i<0?(i=-i,f=-1):f=1,c<0?(c=-c,r=-1):r=1,i<<=1,c<<=1,a(t,e,s),c>i)for(var _=i-(c>>1);t!=o;)_>=0&&(e+=f,_-=c),_+=i,a(t+=r,e,s);else for(_=c-(i>>1);e!=n;)_>=0&&(t+=r,_-=i),_+=c,a(t,e+=f,s)}function c(t,e,o,n){var s=-o,r=0,f=2-2*o;do{a(t-s,e+r,n),a(t-r,e-s,n),a(t+s,e-r,n),a(t+r,e+s,n),(o=f)<=r&&(f+=2*++r+1),(o>s||f>r)&&(f+=2*++s+1)}while(s<0)}function _(t,e,o,n,s){x1=0|t,y1=0|e,x2=t+o|0,y2=e+n|0,i(x1,y1,x2,y1,s),i(x2,y1,x2,y2,s),i(x1,y2,x2,y2,s),i(x1,y1,x1,y2,s)}function h(t,e,o,n,s){x1=0|t,y1=0|e,x2=t+o|0,y2=e+n|0;var r=Math.abs(y2-y1);if(i(x1,y1,x2,y1,s),r>0)for(;--r;)i(x1,y1+r,x2,y1+r,s);i(x1,y2,x2,y2,s)}function u(t,e,o,n,s,r,f){var a=T,t=Math.round(16*t),o=Math.round(16*o),s=Math.round(16*s),e=Math.round(16*e),i=t-o,c=(n=Math.round(16*n))-e,_=o-s,h=(r=Math.round(16*r))-n,u=s-t,l=e-r,v=Math.max(Math.min(t,o,s)+15>>4,0),m=Math.min(Math.max(t,o,s)+15>>4,T),d=Math.max(Math.min(e,n,r)+15>>4,0),x=Math.min(Math.max(e,n,r)+15>>4,D);v&=-8,d&=-8;var y=-c*t-i*e,w=-h*o-_*n,p=-l*s-u*r;(c>0||0==c&&i>0)&&y++,(h>0||0==h&&_>0)&&w++,(l>0||0==l&&u>0)&&p++,y=y-1>>4,w=w-1>>4,p=p-1>>4;var M=0,q=0,R=0,K=0,b=0,g=0;i>=0?q-=7*i:M-=7*i,c>=0?q-=7*c:M-=7*c,_>=0?K-=7*_:R-=7*_,h>=0?K-=7*h:R-=7*h,u>=0?g-=7*u:b-=7*u,l>=0?g-=7*l:b-=7*l;for(var k=a-8,S=d;S<x;S+=8)for(var A=v;A<m;A+=8){var X=y+i*S+c*A,Y=w+_*S+h*A,C=p+u*S+l*A;if(!(X<q||Y<K||C<g)){var P=A+S*a;if(X>=M&&Y>=R&&C>=b)for(I=0;I<8;I++){for(F=0;F<8;F++,P++)N[E+P]=f;P+=k}else for(var I=0;I<8;I++){for(var O=X,U=Y,B=C,F=0;F<8;F++)(O|U|B)>=0&&(N[E+P]=f),O+=c,U+=h,B+=l,P++;X+=i,Y+=_,C+=u,P+=k}}}}function l(t=0,e=0,o=16,n=16,s=0,r=0,f=!1,a=!1){for(var i=0;i<n;i++)for(var c=0;c<o;c++)r+i<D&&s+c<T&&r+i>-1&&s+c>-1&&(f&a?N[C+((e+(n-i))*T+t+(o-c))]>0&&(N[E+((r+i)*T+s+c)]=I[N[C+((e+(n-i))*T+t+(o-c))]]):a&&!f?N[C+((e+(n-i))*T+t+c)]>0&&(N[E+((r+i)*T+s+c)]=N[C+((e+(n-i))*T+t+c)]):f&&!a?N[C+((e+i)*T+t+(o-c))]>0&&(N[E+((r+i)*T+s+c)]=N[C+((e+i)*T+t+(o-c))]):f||a||N[C+((e+i)*T+t+c)]>0&&(N[E+((r+i)*T+s+c)]=I[N[C+((e+i)*T+t+c)]]))}function v(){for(var t=g;t--;)F[t]=P[I[N[t]]];O.at.set(B),Y.ft(O,0,0)}function m(t){switch(E=S,f(0),E=A,f(0),E=0,t){case L:currentRoom[0]--,currentRoom[0]<0&&(currentRoom[0]=j),console.log(currentRoom);break;case G:currentRoom[0]++,currentRoom[0]>j&&(currentRoom[0]=0),console.log(currentRoom);break;case H:currentRoom[1]--,currentRoom[1]<0&&(currentRoom[1]=z),console.log(currentRoom);break;case V:currentRoom[1]++,currentRoom[1]>z&&(currentRoom[1]=0),console.log(currentRoom)}}function d(t){for(var e=t[0].length,o=0;o<e;o++){var n=[];n=y(t[0].charAt(o));for(var s=0;s<5;s++)for(var r=0;r<5;r++)1==n[5*s+r]&&(1==t[4]?a(t[1]+r*t[4]+(5*t[4]+t[3])*o,t[2]+s*t[4],t[5]):h(t[1]+r*t[4]+(5*t[4]+t[3])*o,t[2]+s*t[4],t[4],t[4],t[5]))}}function x(t){var e=5*t[7],o=t[0].split("\n"),n=o.slice(0),s=o.length,r=n.sort(function(t,e){return e.length-t.length})[0],f=r.length*e+(r.length-1)*t[3],a=s*e+(s-1)*t[4];t[5]||(t[5]="left"),t[6]||(t[6]="bottom");var i=t[1],c=t[2],_=t[1]+f,h=t[2]+a;"center"==t[5]?(i=t[1]-f/2,_=t[1]+f/2):"right"==t[5]&&(i=t[1]-f,_=t[1]),"center"==t[6]?(c=t[2]-a/2,h=t[2]+a/2):"bottom"==t[6]&&(c=t[2]-a,h=t[2]);for(var u=i+f/2,l=c+a/2,v=0;v<s;v++){var m=o[v],x=m.length*e+(m.length-1)*t[3],y=t[1],w=t[2]+(e+t[4])*v;"center"==t[5]?y=t[1]-x/2:"right"==t[5]&&(y=t[1]-x),"center"==t[6]?w-=a/2:"bottom"==t[6]&&(w-=a),d([m,y,w,t[3]||0,t[7]||1,t[8],t[9]])}return{it:i,ct:c,_t:u,ht:l,lt:_,ut:h,z:f,W:a}}function y(t){return index=fontString.indexOf(t),fontBitmap.substring(25*index,25*index+25).split("")}var w={vt:Date.now(),mt:1664525,dt:1013904223,xt:Math.pow(2,32),yt:function(t){this.vt=t},pt:function(){return this.vt=(this.vt*this.mt+this.dt)%this.xt,this.vt},wt:function(){return this.pt()/this.xt},Mt:function(t){return null==t&&(t=.5),this.wt()<t},qt:function(t,e){return t+this.wt()*(e-t)},Rt:function(t,e){return Math.floor(this.qt(t,e))},Kt:function(){for(var t=this.Rt(0,Math.pow(2,24)).toString(16).toUpperCase();t.length<6;)t="0"+t;return"#"+t}},p={},M=2,q=33,R=null,K=[e,function(t){return e(t)<0?-1:1},function(t){return t%1-.5},function(t){var e=t%1*4;return e<2?e-1:3-e}];p.bt=function(t){this.Tt=t,this.Dt=t.length/M/2},p.bt.prototype.gt=function(t){null===R&&(R=new AudioContext);var e=this.Tt,o=this.Dt*M*2,n=R.kt(M,this.Dt,44100),s=n.St(0),r=n.St(1),f=0,a=function(){for(var i=new Date,c=0;f<o/2;){var _=4*(e[4*f]+(e[4*f+1]<<8)-32768);if(_=_<-32768?-32768:_>32767?32767:_,s[f]=_/32768,_=4*(e[4*f+2]+(e[4*f+3]<<8)-32768),_=_<-32768?-32768:_>32767?32767:_,r[f]=_/32768,f+=1,(c+=1)%1e3==0&&new Date-i>q)return void setTimeout(a,0)}setTimeout(function(){t(n)},0)};setTimeout(a,0)},p.At=function(t,e){this.Et=t,this.Ct=e||5605,this.Pt=K[t.It],this.Ot=K[t.Ut],this.Xt=K[t.Yt],this.Bt=t.Ft,this.Nt=t.Lt,this.Gt=t.Ht,this.Vt=Math.pow(2,t.jt-8)/this.Ct,this.zt=Math.pow(2,t.Wt-8)/this.Ct},p.At.prototype.Jt=function(t,n,s){new Date;for(var r=0,f=0,a=o(t+12*(this.Et.e-8)+this.Et.t)*(1+8e-4*this.Et.o),i=o(t+12*(this.Et.Qt-8)+this.Et.Zt)*(1+8e-4*this.Et.$t),c=this.Et.te/255,_=0,h=0,u=this.Bt+this.Nt+this.Gt-1;u>=0;--u){var l=u+s,v=this.Pt(l*this.zt)*this.Et.ee/512+.5,m=1;u<this.Bt?m=u/this.Bt:u>=this.Bt+this.Nt&&(m-=(u-this.Bt-this.Nt)/this.Gt);var d=a;this.Et.oe&&(d+=v),this.Et.ne&&(d*=m*m),r+=d;var x=this.Ot(r)*this.Et.se;d=i,this.Et.re&&(d*=m*m),f+=d,x+=this.Xt(f)*this.Et.ae,this.Et.fe&&(x+=(2*Math.random()-1)*this.Et.fe*m),x*=m/255;var y=this.Et.ie;this.Et.ce&&(y*=v);var w=c*(x-h)-(_+=(y=1.5*Math.sin(3.141592*y/44100))*h);switch(h+=y*w,this.Et._e){case 1:x=w;break;case 2:x=_;break;case 3:x=h;break;case 4:x=_+w}if(d=e(l*this.Vt)*this.Et.he/512+.5,x*=39*this.Et.le,(l*=4)+3<n.length){var p=n[l]+(n[l+1]<<8)+x*(1-d);n[l]=255&p,n[l+1]=p>>8&255,p=n[l+2]+(n[l+3]<<8)+x*d,n[l+2]=255&p,n[l+3]=p>>8&255}}},p.At.prototype._=function(t,e){var o=this.Bt+this.Nt+this.Gt-1+32*this.Ct,r=this;n(o,function(n){r.Jt(t,n,0),s(n,o,r.Et,r.Ct,function(){e(new p.bt(n))})})},p.At.prototype.ue=function(t,e){this._(t,function(t){t.gt(e)})},p.i=function(t){this.ve=t,this.Dt=44100*t.me},p.i.prototype.de=function(t,e,o){var r=this;n(this.Dt,function(n){var f=r.Dt,a=r.Dt*M*2,i=r.ve.Ct,c=r.ve.xe,_=new p.At(t,i),h=0,u=0,l=0,v=function(){for(var e=new Date;;)if(32!==l){if(u===c-1)return void setTimeout(m,0);var o=t.ye[u];if(o){var s=t.dt[o-1].pe[l];s&&_.Jt(s,n,h)}if(h+=i,l+=1,new Date-e>q)return void setTimeout(v,0)}else l=0,u+=1},m=function(){s(n,f,t,i,x)},d=0,x=function(){for(var t=new Date,s=0;d<a;){var r=e[d]+(e[d+1]<<8)+n[d]+(n[d+1]<<8)-32768;if(e[d]=255&r,e[d+1]=r>>8&255,d+=2,(s+=1)%1e3==0&&new Date-t>q)return void setTimeout(x,0)}setTimeout(o,0)};setTimeout(v,0)})},p.i.prototype._=function(t){var e=this;n(this.Dt,function(o){var n=0,s=function(){n<e.ve.we.length?(n+=1,e.de(e.ve.we[n-1],o,s)):t(new p.bt(o))};s()})},p.i.prototype.ue=function(t){this._(function(e){e.gt(t)})};var b={me:37,we:[{e:7,t:0,o:0,ne:0,se:192,Ut:3,Qt:7,Zt:0,$t:7,re:0,ae:201,Yt:3,fe:0,Ft:789,Lt:1234,Ht:13636,le:191,_e:2,ie:5839,te:254,st:6,rt:121,jt:6,he:147,oe:0,ce:1,Wt:6,ee:195,It:0,ye:[1,2,0,0,1,2,1,2],dt:[{pe:[154,0,154,0,152,0,147,0,0,0,0,0,0,0,0,0,154,0,154,0,152,0,157,0,0,0,156,0,0,0,0,0]},{pe:[154,0,154,0,152,0,147,0,0,0,0,0,0,0,0,0,154,0,154,0,152,0,157,0,0,0,159,0,0,0,0,0]}]},{e:7,t:0,o:0,ne:0,se:255,Ut:2,Qt:8,Zt:0,$t:18,re:1,ae:191,Yt:2,fe:0,Ft:3997,Lt:56363,Ht:1e5,le:255,_e:2,ie:392,te:255,st:8,rt:69,jt:5,he:67,oe:0,ce:1,Wt:4,ee:57,It:3,ye:[1,2,1,2,1,2,1,2],dt:[{pe:[130,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{pe:[123,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{e:8,t:0,o:0,ne:0,se:0,Ut:0,Qt:8,Zt:0,$t:0,re:0,ae:0,Yt:0,fe:60,Ft:50,Lt:419,Ht:4607,le:130,_e:1,ie:10332,te:120,st:4,rt:16,jt:5,he:108,oe:0,ce:0,Wt:5,ee:187,It:0,ye:[0,0,0,0,1,1],dt:[{pe:[0,0,147,0,0,0,147,147,0,0,147,0,0,147,0,147,0,0,147,0,0,0,147,147,0,0,147,0,0,147,0,147]}]},{e:7,t:0,o:0,ne:1,se:255,Ut:0,Qt:7,Zt:0,$t:0,re:1,ae:255,Yt:0,fe:0,Ft:50,Lt:150,Ht:4800,le:200,_e:2,ie:600,te:254,st:0,rt:0,jt:0,he:0,oe:0,ce:0,Wt:0,ee:0,It:0,ye:[1,1,1,1,1,1],dt:[{pe:[147,0,0,0,0,0,0,0,147,0,0,0,0,0,0,0,147,0,0,0,0,0,0,0,147,0,0,0,0,0,0,0]}]},{e:7,t:0,o:0,ne:0,se:255,Ut:2,Qt:7,Zt:0,$t:9,re:0,ae:154,Yt:2,fe:0,Ft:2418,Lt:1075,Ht:10614,le:240,_e:3,ie:2962,te:255,st:6,rt:117,jt:3,he:73,oe:0,ce:1,Wt:5,ee:124,It:0,ye:[0,0,0,0,1,2,1,2],dt:[{pe:[154,0,154,0,152,0,147,0,0,0,0,0,0,0,0,0,154,0,154,0,152,0,157,0,0,0,156,0,0,0,0,0]},{pe:[154,0,154,0,152,0,147,0,0,0,0,0,0,0,0,0,154,0,147,0,152,0,157,0,0,0,159,0,0,0,0,0]}]},{e:7,t:0,o:0,ne:0,se:192,Ut:1,Qt:6,Zt:0,$t:9,re:0,ae:192,Yt:1,fe:0,Ft:137,Lt:2e3,Ht:4611,le:192,_e:1,ie:982,te:89,st:6,rt:25,jt:6,he:77,oe:0,ce:1,Wt:3,ee:69,It:0,ye:[1,2,1,3,1,3],dt:[{pe:[130,0,130,0,142,0,130,130,0,142,130,0,142,0,130,0,130,0,130,0,142,0,130,130,0,142,130,0,142,0,130,0]},{pe:[123,0,123,0,135,0,123,123,0,135,123,0,135,0,123,0,123,0,123,0,135,0,123,123,0,135,123,0,135,0,123,0]},{pe:[135,0,135,0,147,0,135,135,0,147,135,0,147,0,135,0,135,0,135,0,147,0,135,135,0,147,135,0,147,0,135,0]}]},{e:7,t:0,o:0,ne:0,se:255,Ut:3,Qt:8,Zt:0,$t:0,re:0,ae:255,Yt:0,fe:127,Ft:22,Lt:88,Ht:3997,le:255,_e:3,ie:4067,te:234,st:4,rt:33,jt:2,he:84,oe:0,ce:1,Wt:3,ee:28,It:0,ye:[0,0,1,2,1,2,1,3],dt:[{pe:[0,0,142,0,154,0,0,0,142,0,0,0,154,0,0,0,0,0,142,0,154,0,0,0,142,0,0,0,154,0,0,0]},{pe:[0,0,147,0,154,0,0,0,147,0,0,0,154,0,0,0,0,0,147,0,154,0,147,0,0,0,154,0,0,0,154,0]},{pe:[0,0,147,0,154,0,0,0,147,0,0,0,154,0,0,0,0,0,147,0,154,0,0,0,147,0,0,0,0,0,0,0]}]},{e:8,t:0,o:0,ne:0,se:0,Ut:0,Qt:8,Zt:0,$t:0,re:0,ae:0,Yt:0,fe:255,Ft:140347,Lt:9216,Ht:133417,le:208,_e:2,ie:2500,te:16,st:2,rt:157,jt:8,he:207,oe:0,ce:1,Wt:2,ee:51,It:0,ye:[0,0,1,1,1,1,1,1],dt:[{pe:[147,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]}],Ct:5513,xe:9};fontString="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890_!@.'\"?/<()",fontBitmap="11111100011111110001100011111010001111101000111110111111000010000100000111111100100101000110001111101111110000111001000011111111111000011100100001000011111100001011110001111111000110001111111000110001111110010000100001001111111111000100001010010111101000110010111001001010001100001000010000100001111110001110111010110001100011000111001101011001110001011101000110001100010111011110100011001011100100000111010001100011001001111111101000111110100011000101111100000111000001111101111100100001000010000100100011000110001100010111010001100011000101010001001000110001101011010101110100010101000100010101000110001010100010000100001001111100010001000100011111001000110000100001000111001110100010001000100111111111000001001100000111110100101001011111000100001011111100001111000001111100111110000111101000101110111110000100010001000010001110100010111010001011100111010001011110000101110011101000110001100010111000000000000000000000111110010000100001000000000100111111000110111101011011101010111110101011111010100000000000000000000000100001100001000100000000000011011010011001000000000000111010001001100000000100000010001000100010001000000010001000100000100000100001000100001000010000010";const T=384,D=256,g=T*D|0,k=4*g|0,S=6*g|0,A=5*g|0;var X=document.Me("canvas"),Y=X.J("2d"),E=0,C=g,P=[4278190080,4281606178,4282132549,4281416038,4282078863,4280709599,4284915929,4288332782,4281791227,4283491737,4281384554,4285436983,4281297227,4280568658,4281941042,4285808447,4286734384,4292963931,4294941539,4293184863,4294761419,4294967295,4290227611,4287069828,4285164137,4283586137,4287251062,4281479852,4284700633,4290411479,4283078543,4281364362],I=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31];Y.qe=!1,Y.Re=!1,X.z=T,X.W=D;var O=Y.Ke(0,0,T,D),U=new ArrayBuffer(O.at.length),B=new Uint8Array(U),F=new Uint32Array(U),N=new Uint8ClampedArray(T*D*10);Number.prototype.be=function(t,e){return Math.min(Math.max(this,t),e)};const L=1,G=2,H=3,V=4,j=2,z=2;states={},init=(()=>{r(),last=0,dt=0,now=0,t=0,songTrigger=!1,state="game",R=new AudioContext,currentRoom=[0,0],player.Te(),stats=new Stats,document.De.K(stats.b),loop()}),stopCapture=(t=>{}),window.A("keyup",function(t){Key.ge(t)},!1),window.A("mousedown",function(t){stopCapture(t)},!1),window.A("keydown",function(t){Key.ke(t)},!1),window.A("blur",function(t){paused=!0},!1),window.A("focus",function(t){paused=!1},!1),loop=(e=>{stats.B();let o=(new Date).getTime();dt=Math.min(1,(o-last)/1e3),t+=dt,states[state].Ae(dt),last=o,states[state].Se(),v(),stats.F(),requestAnimationFrame(loop)}),world=[7,0,0,0,0,0,6,7,8],rooms=[{Ee:function(t){C=k,E=0,l(0,0,T,D),x(["0",20,20,1,1,"left","bottom",2,15,0]),w.yt(1019);for(let t=0;t<200;t++)a(w.Rt(0,384),w.Rt(0,256),16)}},{Ee:function(e){x(["1",20,20,1,1,"left","bottom",2,15,0]);for(let e=0;e<384;e+=40)for(let o=0;o<256;o+=40){let n=e-192+40*Math.sin(t),s=o-128+40*Math.cos(t);c(e,o,Math.sqrt(n*n+s*s)-8,14)}}},{Ee:function(e){C=k,E=0,l(0,0,T,D),x(["2",20,20,1,1,"left","bottom",2,15,0]);for(let e=0;e<384;e+=40)for(let o=0;o<256;o+=40){let n=e-576+40*Math.sin(t),s=o-128+40*Math.cos(t);c(e,o,Math.sqrt(n*n+s*s)-8,14)}}},{Ee:function(t){E=S,h(0,0,127,256,27),h(250,0,127,256,27),E=0,x(["3",20,20,1,1,"left","bottom",2,15,0])}},{Ee:function(t){E=S,h(0,0,127,256,27),h(250,0,127,256,27),E=0,x(["4",20,20,1,1,"left","bottom",2,15,0])}},{Ee:function(t){x(["5",20,20,1,1,"left","bottom",2,15,0])}},{Ee:function(t){x(["6",20,20,1,1,"left","bottom",2,15,0]),E=S,h(0,205,384,10,25),E=0}},{Ee:function(t){x(["7",20,20,1,1,"left","bottom",2,15,0]),E=S,u(0,256,384,256,182,205,25),h(100,90,20,80,24),h(100,160,100,20,23),h(200,900,10,100,23),h(210,90,100,100,22),E=0}},{Ee:function(t){x(["8",20,20,1,1,"left","bottom",2,15,0]),E=S,h(0,205,384,10,25),E=0}}];new p.i(b);player={Te(){this.Ce=64,this.Pe=64,this.Ie=9,this.Oe=0,this.Ue=0,this.q=200,this.R=200,this.Xe=.8,this.Ye=8,this.Be=400,this.Fe=400,this.Ne=-400,this.Le=-400},N(t){this.Oe*=player.Xe,this.Ue+=player.Ye,this.Ue=this.Ue.be(this.Ne,this.Be),this.Oe=this.Oe.be(this.Le,this.Fe);let e=t*player.Oe,o=t*player.Ue;e=Math.abs(e)>this.Ie?e/2:e,o=Math.abs(o)>this.Ie?o/2:o,player.Ce+=e,player.Pe+=o,this.He={u:this.Ce-this.Ie|0,h:this.Ce+this.Ie|0,v:this.Pe-this.Ie|0,M:this.Pe+this.Ie|0,z:2*this.Ie,W:2*this.Ie},(Key.Ve(Key.je)||Key.Ve(Key.ze))&&(player.Oe=player.q),(Key.Ve(Key.mt)||Key.Ve(Key.We))&&(player.Oe=-player.q),(Key.Ve(Key.Je)||Key.Ve(Key.Qe))&&(player.Ue=-player.R),(Key.Ve(Key.Ze)||Key.Ve(Key.$e))&&(player.Ue=player.R),offsetX=this.to(t),offsetY=this.eo(t),offsetX=Math.abs(offsetX)>=this.Ie?offsetX/2:offsetX,offsetY=Math.abs(offsetY)>=this.Ie?offsetY/2:offsetY,console.Ge(offsetX,offsetY),this.Ce+=Math.abs(offsetX)<Math.abs(offsetY)||Math.abs(offsetX)==Math.abs(offsetY)?offsetX:0,this.Pe+=Math.abs(offsetY)<Math.abs(offsetX)||Math.abs(offsetX)==Math.abs(offsetY)?offsetY:0,player.Ce>T&&(player.Ce=0,m(G)),player.Ce<0&&(player.Ce=T,m(L)),player.Pe>D&&(player.Pe=0,m(V)),player.Pe<0&&(player.Pe=D,m(H))},Ee(t){C=k,E=0,l(1,1,18,18,this.Ce-this.Ie|0,this.Pe-this.Ie|0),_(this.Ce-this.Ie,this.Pe-this.Ie,2*this.Ie,2*this.Ie)},oo:(t,e)=>N[S+t+e*T],eo(t){let e=0,o=this.He;for(let t=o.u;t<=o.h;t++)if(N[S+t+T*o.M])for(let n=o.M;n>=o.v;n--)N[S+t+T*n]&&(e=n-o.M-1);for(let t=o.u;t<=o.h;t++)if(N[S+t+T*o.v])for(let n=o.v;n<=o.M;n++)N[S+t+T*n]&&(e=n-o.v+1);return e},to(t){let e=0,o=this.He;for(let t=o.v;t<=o.M;t++)if(N[S+o.u+T*t])for(let n=o.u;n<=o.h;n++)N[S+n+T*t]&&(e=n-o.u);for(let t=o.v;t<=o.M;t++)if(N[S+o.h+T*t])for(let n=o.h;n>=o.u;n--)N[S+n+T*t]&&(e=n-o.h);return e}},states.no={Ae:function(t){Key.Ve(Key.so)&&(state="menu")},Se:function(e){E=0,f(0),x(["GAME OVER",256,80+15*Math.sin(2.5*t),8+4*Math.cos(2.9*t),15+5*Math.sin(3.5*t),"center","top",9,27])}},states.ro={Ae:function(t){Key.Ve(Key.ye)&&(state="game")},Se:function(e){E=0,f(0);let o=t/3;for(let t=-128;t<128;t+=1)for(let e=-256;e<256;e+=2)a(256+e+256*Math.cos(4*(t/128+o))+t,256+t+128*Math.sin(4*(e/256+o))+e,e/8%32);x(["LOSTGAME",T/2,40+15*Math.sin(2.5*t),8+4*Math.cos(2.9*t),15+5*Math.sin(3.5*t),"center","top",6,21]),x(["PRESS P TO CONTINUE",T/2,230,2,2,"center","top",1,21])}},states.ao={Ae(t){player.N(t)},Se(t){E=0,f(1),E=S,f(0),E=0,rooms[world[currentRoom[1]*(j+1)+currentRoom[0]]].Ee(),C=S,l(0,0,T,D),C=A,l(0,0,T,D),player.Ee(t),E=0}},Key={fo:{},io:{},We:37,Qe:38,ze:39,$e:40,co:32,mt:65,Je:87,Ze:83,je:68,_o:90,Ce:88,ho:70,ye:80,so:82,Ve(t){return this.fo[t]},lo(t){return this.io[t]},ke(t){this.fo[t.uo]=!0},ge(t){this.io[t.uo]=!0,delete this.fo[t.uo]},N(){this.io={}}},window.vo=init()}();
</script></body></html>