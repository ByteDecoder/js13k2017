<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>JS13K 2017 boilerplate</title><style>
body{margin:0;overflow:hidden;background:#111;color:#ccc}#canvas{position:fixed;top:50%;bottom:0;left:50%;right:0;width:768px;height:512px;transform:translate(-50%,-30%);image-rendering:optimizeSpeed;image-rendering:-moz-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:-o-crisp-edges;image-rendering:pixelated;-ms-interpolation-mode:nearest-neighbor;cursor:none;margin:auto}
</style></head><body><canvas id="canvas"></canvas><script>
var Stats=function(){function t(t){return n.K(t.b),t}function e(t){for(var e=0;e<n.T.length;e++)n.T[e].g.D=e===t?"block":"none";o=t}var o=0,n=document.k("div");n.g.S="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.A("click",function(t){t.C(),e(++o%n.T.length)},!1);var r=(performance||Date).now(),s=r,a=0,i=t(new Stats.P("FPS","#0ff","#002")),f=t(new Stats.P("MS","#0f0","#020"));if(self.I&&self.I.O)var c=t(new Stats.P("MB","#f08","#201"));return e(0),{U:16,b:n,X:t,Y:e,B:function(){r=(performance||Date).now()},F:function(){a++;var t=(performance||Date).now();if(f.N(t-r,200),t>s+1e3&&(i.N(1e3*a/(t-s),100),s=t,a=0,c)){var e=performance.O;c.N(e.L/1048576,e.G/1048576)}return t},N:function(){r=this.F()},H:n,V:e}};Stats.P=function(t,e,o){var n=1/0,r=0,s=Math.round,a=s(window.j||1),i=80*a,f=48*a,c=3*a,_=2*a,u=3*a,h=15*a,l=74*a,v=30*a,d=document.k("canvas");d.z=i,d.W=f,d.g.S="width:80px;height:48px";var m=d.J("2d");return m.Q="bold "+9*a+"px Helvetica,Arial,sans-serif",m.Z="top",m.$=o,m.l(0,0,i,f),m.$=e,m.tt(t,c,_),m.l(u,h,l,v),m.$=o,m.et=.9,m.l(u,h,l,v),{b:d,N:function(f,x){n=Math.min(n,f),r=Math.max(r,f),m.$=o,m.et=1,m.l(0,0,i,h),m.$=e,m.tt(s(f)+" "+t+" ("+s(n)+"-"+s(r)+")",c,_),m.ot(d,u+a,h,l-a,v,u,h,l-a,v),m.l(u+l-a,h,a,v),m.$=o,m.et=.9,m.l(u+l-a,h,a,s((1-f/x)*v))}}},"object"==typeof module&&(module.nt=Stats),function(){function e(t){return Math.sin(6.283184*t)}function o(t){return.00390625*Math.pow(1.059463094,t-128)}function n(t,e){setTimeout(function(){var o=new Uint8Array(t*S*2),n=o.length-2,r=function(){for(var t=new Date,s=0;n>=0;)if(o[n]=0,o[n+1]=128,n-=2,(s+=1)%1e3==0&&new Date-t>b)return void setTimeout(r,0);setTimeout(function(){e(o)},0)};setTimeout(r,0)},0)}function r(t,e,o,n,r){var s=o.st*n>>1,a=o.rt/255,i=0,f=function(){for(var o=new Date,n=0;i<e-s;){var c=4*i,_=4*(i+s),u=t[_]+(t[_+1]<<8)+(t[c+2]+(t[c+3]<<8)-32768)*a;if(t[_]=255&u,t[_+1]=u>>8&255,u=t[_+2]+(t[_+3]<<8)+(t[c]+(t[c+1]<<8)-32768)*a,t[_+2]=255&u,t[_+3]=u>>8&255,++i,(n+=1)%1e3==0&&new Date-o>b)return void setTimeout(f,0)}setTimeout(r,0)};setTimeout(f,0)}function s(){W=L,h(3,7,17,9,8),h(2,8,19,7,8),h(4,9,15,5,2),h(6,11,2,1,16),h(16,11,2,1,16),c(7,12,8,12,21),c(17,12,18,12,21),c(12,6,12,3,5),i(12,3,21),h(10,17,3,1,5),h(8,19,7,7,5),h(9,23,5,5,0),u(11,28,5,13),h(10,22,2,5,8),u(11,28,3,8),_(11,28,1,5),d(11,19,18,27,21,23,8)}function a(t){et.fill(t,W,W+I)}function i(t,e,o){e|=0,o|=0,(t|=0)>0&&t<B&&e>0&&e<C&&(et[W+e*B+t]=o)}function f(t,e,o=W){return et[o+t+e*B]}function c(t,e,o,n,r){var s,a,f=(n|=0)-(e|=0),c=(o|=0)-(t|=0);if(f<0?(f=-f,a=-1):a=1,c<0?(c=-c,s=-1):s=1,f<<=1,c<<=1,i(t,e,r),c>f)for(var _=f-(c>>1);t!=o;)_>=0&&(e+=a,_-=c),_+=f,i(t+=s,e,r);else for(_=c-(f>>1);e!=n;)_>=0&&(t+=s,_-=f),_+=c,i(t,e+=a,r)}function _(t,e,o,n){var r=-o,s=0,a=2-2*o;do{i(t-r,e+s,n),i(t-s,e-r,n),i(t+r,e-s,n),i(t+s,e+r,n),(o=a)<=s&&(a+=2*++s+1),(o>r||a>s)&&(a+=2*++r+1)}while(r<0)}function u(t,e,o,n){if(!(o<0)){t|=0,e|=0,n|=0;var r=-(o|=0),s=0,a=2-2*o;do{c(t-r,e-s,t+r,e-s,n),c(t-r,e+s,t+r,e+s,n),(o=a)<=s&&(a+=2*++s+1),(o>r||a>s)&&(a+=2*++r+1)}while(r<0)}}function h(t,e,o,n,r){x1=0|t,y1=0|e,x2=t+o|0,y2=e+n|0;var s=Math.abs(y2-y1);if(c(x1,y1,x2,y1,r),s>0)for(;--s;)c(x1,y1+s,x2,y1+s,r);c(x1,y2,x2,y2,r)}function l(t,e,o,n,r,s){for(let a=0;a<=r;a++)h(t+a,e-a,o-2*a,n+2*a,s)}function v(t,e,o,n=o,r=o,s=o){for(let a=0;a<=B;a++)for(let i=0;i<=C;i++){let f=a-1+i*B,c=a+1+i*B,_=a+(i+1)*B,u=a+(i-1)*B;et[t+(a+i*B)]&&(et[t+f]||(et[e+f]=o),et[t+c]||(et[e+c]=r),et[t+u]||(et[e+u]=n),et[t+_]||(et[e+_]=s))}}function d(t,e,o,n,r,s,a){var i=B,t=Math.round(16*t),o=Math.round(16*o),r=Math.round(16*r),e=Math.round(16*e),f=t-o,c=(n=Math.round(16*n))-e,_=o-r,u=(s=Math.round(16*s))-n,h=r-t,l=e-s,v=Math.max(Math.min(t,o,r)+15>>4,0),d=Math.min(Math.max(t,o,r)+15>>4,B),m=Math.max(Math.min(e,n,s)+15>>4,0),x=Math.min(Math.max(e,n,s)+15>>4,C);v&=-8,m&=-8;var y=-c*t-f*e,p=-u*o-_*n,w=-l*r-h*s;(c>0||0==c&&f>0)&&y++,(u>0||0==u&&_>0)&&p++,(l>0||0==l&&h>0)&&w++,y=y-1>>4,p=p-1>>4,w=w-1>>4;var M=0,q=0,K=0,R=0,T=0,D=0;f>=0?q-=7*f:M-=7*f,c>=0?q-=7*c:M-=7*c,_>=0?R-=7*_:K-=7*_,u>=0?R-=7*u:K-=7*u,h>=0?D-=7*h:T-=7*h,l>=0?D-=7*l:T-=7*l;for(var k=i-8,g=m;g<x;g+=8)for(var S=v;S<d;S+=8){var b=y+f*g+c*S,A=p+_*g+u*S,E=w+h*g+l*S;if(!(b<q||A<R||E<D)){var P=S+g*i;if(b>=M&&A>=K&&E>=T)for(I=0;I<8;I++){for(O=0;O<8;O++,P++)et[W+P]=a;P+=k}else for(var I=0;I<8;I++){for(var U=b,F=A,N=E,O=0;O<8;O++)(U|F|N)>=0&&(et[W+P]=a),U+=c,F+=u,N+=l,P++;b+=f,A+=_,E+=h,P+=k}}}}function m(t=0,e=0,o=384,n=256,r=0,s=0,a=!1,i=!1){for(var f=0;f<n;f++)for(var c=0;c<o;c++)s+f<C&&r+c<B&&s+f>-1&&r+c>-1&&(a&i?et[X+((e+(n-f))*B+t+(o-c))]>0&&(et[W+((s+f)*B+r+c)]=J[et[X+((e+(n-f))*B+t+(o-c))]]):i&&!a?et[X+((e+(n-f))*B+t+c)]>0&&(et[W+((s+f)*B+r+c)]=et[X+((e+(n-f))*B+t+c)]):a&&!i?et[X+((e+f)*B+t+(o-c))]>0&&(et[W+((s+f)*B+r+c)]=et[X+((e+f)*B+t+(o-c))]):a||i||et[X+((e+f)*B+t+c)]>0&&(et[W+((s+f)*B+r+c)]=J[et[X+((e+f)*B+t+c)]]))}function x(t,e,o,n,r,s,a,i){i*=.0174533;var f=t+o/2,c=e+n/2,_=o*a/2*1.41421356237|5,u=n*a/2*1.41421356237|5,h=-_,l=_,v=-u,d=u,m=1/a,x=Math.cos(-i)*m,y=Math.sin(-i)*m;for(let t=v;t<d;t++)for(let e=h;e<l;e++){let a=f+Math.round(x*e+y*t),i=c+Math.round(-y*e+x*t),_=e+r|0,u=t+s|0;a>=0&&i>=0&&a<o&&i<n&&et[X+(i*B+a)]>0&&(et[W+(u*B+_)]=et[X+(i*B+a)])}}function y(t,e,o,n,r,s,a){r=r||8,o/=s=s||8,n/=r;for(var i=0;i<r;++i)for(var f=0,c=s/2;f<c;++f)h(t+(2*f*o+(i%2?0:o)),i*n,o-1,n-1,a)}function p(){for(var t=I;t--;)tt[t]=Y[J[et[t]]];Q.at.set($),z.ft(Q,0,0)}function w(t){switch(W=G,a(0),W=N,a(0),W=O,a(0),W=V,a(0),W=H,a(0),W=F,a(0),t){case ot:currentRoom[0]--,currentRoom[0]<0&&(currentRoom[0]=at),console.log(currentRoom);break;case nt:currentRoom[0]++,currentRoom[0]>at&&(currentRoom[0]=0),console.log(currentRoom);break;case rt:currentRoom[1]--,currentRoom[1]<0&&(currentRoom[1]=it),console.log(currentRoom);break;case st:currentRoom[1]++,currentRoom[1]>it&&(currentRoom[1]=0),console.log(currentRoom)}W=G,rooms[world[currentRoom[1]*(at+1)+currentRoom[0]]].Ee(),M()}function M(){q(),K()}function q(){X=G,W=N,a(0);t=3e3;for(k.yt(1019);--t;){let t=k.Rt(0,B),e=k.Rt(0,C);f(t,e,G)&&l(t+k.Rt(-5,0),e+k.Rt(-10,0),k.Rt(0,15),k.Rt(0,10),1,k.Rt(22,24))}W=O,a(0),v(N,O,25,20,26,2),W=H,X=N,m(),X=O,m(),W=N,a(0);var t=3e3;for(k.yt(1019);--t;){let t=k.Rt(0,B),e=k.Rt(0,C);et[G+t+e*B]&&l(t+k.Rt(-5,0),e+k.Rt(-10,0),k.Rt(0,15),k.Rt(0,10),1,k.Rt(22,24))}W=O,a(0),v(N,O,25,20,26,2),W=H,X=N,m(),X=O,m()}function K(){W=N,a(0);var t=1e3;for(k.yt(1019);--t;){let t=k.Rt(0,B),e=k.Rt(0,C);et[G+t+e*B]&&(h(t+k.Rt(-5,0),e+k.Rt(-20,0),k.Rt(0,5),k.Rt(0,20),k.Rt(22,24)),u(t,e-10,2,k.Rt(22,24)))}W=O,a(0),v(N,O,25,20,26,2),W=V,X=N,m(),X=O,m()}function R(t){for(var e=t[0].length,o=0;o<e;o++){var n=[];n=D(t[0].charAt(o));for(var r=0;r<5;r++)for(var s=0;s<5;s++)1==n[5*r+s]&&(1==t[4]?i(t[1]+s*t[4]+(5*t[4]+t[3])*o,t[2]+r*t[4],t[5]):h(t[1]+s*t[4]+(5*t[4]+t[3])*o,t[2]+r*t[4],t[4],t[4],t[5]))}}function T(t){var e=5*t[7],o=t[0].split("\n"),n=o.slice(0),r=o.length,s=n.sort(function(t,e){return e.length-t.length})[0],a=s.length*e+(s.length-1)*t[3],i=r*e+(r-1)*t[4];t[5]||(t[5]="left"),t[6]||(t[6]="bottom");var f=t[1],c=t[2],_=t[1]+a,u=t[2]+i;"center"==t[5]?(f=t[1]-a/2,_=t[1]+a/2):"right"==t[5]&&(f=t[1]-a,_=t[1]),"center"==t[6]?(c=t[2]-i/2,u=t[2]+i/2):"bottom"==t[6]&&(c=t[2]-i,u=t[2]);for(var h=f+a/2,l=c+i/2,v=0;v<r;v++){var d=o[v],m=d.length*e+(d.length-1)*t[3],x=t[1],y=t[2]+(e+t[4])*v;"center"==t[5]?x=t[1]-m/2:"right"==t[5]&&(x=t[1]-m),"center"==t[6]?y-=i/2:"bottom"==t[6]&&(y-=i),R([d,x,y,t[3]||0,t[7]||1,t[8],t[9]])}return{it:f,ct:c,_t:h,ht:l,lt:_,ut:u,z:a,W:i}}function D(t){return index=fontString.indexOf(t),fontBitmap.substring(25*index,25*index+25).split("")}var k={vt:Date.now(),mt:1664525,dt:1013904223,xt:Math.pow(2,32),yt:function(t){this.vt=t},pt:function(){return this.vt=(this.vt*this.mt+this.dt)%this.xt,this.vt},wt:function(){return this.pt()/this.xt},Mt:function(t){return null==t&&(t=.5),this.wt()<t},qt:function(t,e){return t+this.wt()*(e-t)},Rt:function(t,e){return Math.floor(this.qt(t,e))},Kt:function(){for(var t=this.Rt(0,Math.pow(2,24)).toString(16).toUpperCase();t.length<6;)t="0"+t;return"#"+t}},g={},S=2,b=33,A=null,E=[e,function(t){return e(t)<0?-1:1},function(t){return t%1-.5},function(t){var e=t%1*4;return e<2?e-1:3-e}];g.bt=function(t){this.Tt=t,this.Dt=t.length/S/2},g.bt.prototype.gt=function(t){null===A&&(A=new AudioContext);var e=this.Tt,o=this.Dt*S*2,n=A.kt(S,this.Dt,44100),r=n.St(0),s=n.St(1),a=0,i=function(){for(var f=new Date,c=0;a<o/2;){var _=4*(e[4*a]+(e[4*a+1]<<8)-32768);if(_=_<-32768?-32768:_>32767?32767:_,r[a]=_/32768,_=4*(e[4*a+2]+(e[4*a+3]<<8)-32768),_=_<-32768?-32768:_>32767?32767:_,s[a]=_/32768,a+=1,(c+=1)%1e3==0&&new Date-f>b)return void setTimeout(i,0)}setTimeout(function(){t(n)},0)};setTimeout(i,0)},g.At=function(t,e){this.Et=t,this.Ct=e||5605,this.Pt=E[t.It],this.Ot=E[t.Ut],this.Xt=E[t.Yt],this.Bt=t.Ft,this.Nt=t.Lt,this.Gt=t.Ht,this.Vt=Math.pow(2,t.jt-8)/this.Ct,this.zt=Math.pow(2,t.Wt-8)/this.Ct},g.At.prototype.Jt=function(t,n,r){new Date;for(var s=0,a=0,i=o(t+12*(this.Et.e-8)+this.Et.t)*(1+8e-4*this.Et.o),f=o(t+12*(this.Et.Qt-8)+this.Et.Zt)*(1+8e-4*this.Et.$t),c=this.Et.te/255,_=0,u=0,h=this.Bt+this.Nt+this.Gt-1;h>=0;--h){var l=h+r,v=this.Pt(l*this.zt)*this.Et.ee/512+.5,d=1;h<this.Bt?d=h/this.Bt:h>=this.Bt+this.Nt&&(d-=(h-this.Bt-this.Nt)/this.Gt);var m=i;this.Et.oe&&(m+=v),this.Et.ne&&(m*=d*d),s+=m;var x=this.Ot(s)*this.Et.se;m=f,this.Et.re&&(m*=d*d),a+=m,x+=this.Xt(a)*this.Et.ae,this.Et.fe&&(x+=(2*Math.random()-1)*this.Et.fe*d),x*=d/255;var y=this.Et.ie;this.Et.ce&&(y*=v);var p=c*(x-u)-(_+=(y=1.5*Math.sin(3.141592*y/44100))*u);switch(u+=y*p,this.Et._e){case 1:x=p;break;case 2:x=_;break;case 3:x=u;break;case 4:x=_+p}if(m=e(l*this.Vt)*this.Et.he/512+.5,x*=39*this.Et.le,(l*=4)+3<n.length){var w=n[l]+(n[l+1]<<8)+x*(1-m);n[l]=255&w,n[l+1]=w>>8&255,w=n[l+2]+(n[l+3]<<8)+x*m,n[l+2]=255&w,n[l+3]=w>>8&255}}},g.At.prototype._=function(t,e){var o=this.Bt+this.Nt+this.Gt-1+32*this.Ct,s=this;n(o,function(n){s.Jt(t,n,0),r(n,o,s.Et,s.Ct,function(){e(new g.bt(n))})})},g.At.prototype.ue=function(t,e){this._(t,function(t){t.gt(e)})},g.i=function(t){this.ve=t,this.Dt=44100*t.me},g.i.prototype.de=function(t,e,o){var s=this;n(this.Dt,function(n){var a=s.Dt,i=s.Dt*S*2,f=s.ve.Ct,c=s.ve.xe,_=new g.At(t,f),u=0,h=0,l=0,v=function(){for(var e=new Date;;)if(32!==l){if(h===c-1)return void setTimeout(d,0);var o=t.ye[h];if(o){var r=t.dt[o-1].pe[l];r&&_.Jt(r,n,u)}if(u+=f,l+=1,new Date-e>b)return void setTimeout(v,0)}else l=0,h+=1},d=function(){r(n,a,t,f,x)},m=0,x=function(){for(var t=new Date,r=0;m<i;){var s=e[m]+(e[m+1]<<8)+n[m]+(n[m+1]<<8)-32768;if(e[m]=255&s,e[m+1]=s>>8&255,m+=2,(r+=1)%1e3==0&&new Date-t>b)return void setTimeout(x,0)}setTimeout(o,0)};setTimeout(v,0)})},g.i.prototype._=function(t){var e=this;n(this.Dt,function(o){var n=0,r=function(){n<e.ve.we.length?(n+=1,e.de(e.ve.we[n-1],o,r)):t(new g.bt(o))};r()})},g.i.prototype.ue=function(t){this._(function(e){e.gt(t)})};var P={me:37,we:[{e:7,t:0,o:0,ne:0,se:192,Ut:3,Qt:7,Zt:0,$t:7,re:0,ae:201,Yt:3,fe:0,Ft:789,Lt:1234,Ht:13636,le:191,_e:2,ie:5839,te:254,st:6,rt:121,jt:6,he:147,oe:0,ce:1,Wt:6,ee:195,It:0,ye:[1,2,0,0,1,2,1,2],dt:[{pe:[154,0,154,0,152,0,147,0,0,0,0,0,0,0,0,0,154,0,154,0,152,0,157,0,0,0,156,0,0,0,0,0]},{pe:[154,0,154,0,152,0,147,0,0,0,0,0,0,0,0,0,154,0,154,0,152,0,157,0,0,0,159,0,0,0,0,0]}]},{e:7,t:0,o:0,ne:0,se:255,Ut:2,Qt:8,Zt:0,$t:18,re:1,ae:191,Yt:2,fe:0,Ft:3997,Lt:56363,Ht:1e5,le:255,_e:2,ie:392,te:255,st:8,rt:69,jt:5,he:67,oe:0,ce:1,Wt:4,ee:57,It:3,ye:[1,2,1,2,1,2,1,2],dt:[{pe:[130,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{pe:[123,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{e:8,t:0,o:0,ne:0,se:0,Ut:0,Qt:8,Zt:0,$t:0,re:0,ae:0,Yt:0,fe:60,Ft:50,Lt:419,Ht:4607,le:130,_e:1,ie:10332,te:120,st:4,rt:16,jt:5,he:108,oe:0,ce:0,Wt:5,ee:187,It:0,ye:[0,0,0,0,1,1],dt:[{pe:[0,0,147,0,0,0,147,147,0,0,147,0,0,147,0,147,0,0,147,0,0,0,147,147,0,0,147,0,0,147,0,147]}]},{e:7,t:0,o:0,ne:1,se:255,Ut:0,Qt:7,Zt:0,$t:0,re:1,ae:255,Yt:0,fe:0,Ft:50,Lt:150,Ht:4800,le:200,_e:2,ie:600,te:254,st:0,rt:0,jt:0,he:0,oe:0,ce:0,Wt:0,ee:0,It:0,ye:[1,1,1,1,1,1],dt:[{pe:[147,0,0,0,0,0,0,0,147,0,0,0,0,0,0,0,147,0,0,0,0,0,0,0,147,0,0,0,0,0,0,0]}]},{e:7,t:0,o:0,ne:0,se:255,Ut:2,Qt:7,Zt:0,$t:9,re:0,ae:154,Yt:2,fe:0,Ft:2418,Lt:1075,Ht:10614,le:240,_e:3,ie:2962,te:255,st:6,rt:117,jt:3,he:73,oe:0,ce:1,Wt:5,ee:124,It:0,ye:[0,0,0,0,1,2,1,2],dt:[{pe:[154,0,154,0,152,0,147,0,0,0,0,0,0,0,0,0,154,0,154,0,152,0,157,0,0,0,156,0,0,0,0,0]},{pe:[154,0,154,0,152,0,147,0,0,0,0,0,0,0,0,0,154,0,147,0,152,0,157,0,0,0,159,0,0,0,0,0]}]},{e:7,t:0,o:0,ne:0,se:192,Ut:1,Qt:6,Zt:0,$t:9,re:0,ae:192,Yt:1,fe:0,Ft:137,Lt:2e3,Ht:4611,le:192,_e:1,ie:982,te:89,st:6,rt:25,jt:6,he:77,oe:0,ce:1,Wt:3,ee:69,It:0,ye:[1,2,1,3,1,3],dt:[{pe:[130,0,130,0,142,0,130,130,0,142,130,0,142,0,130,0,130,0,130,0,142,0,130,130,0,142,130,0,142,0,130,0]},{pe:[123,0,123,0,135,0,123,123,0,135,123,0,135,0,123,0,123,0,123,0,135,0,123,123,0,135,123,0,135,0,123,0]},{pe:[135,0,135,0,147,0,135,135,0,147,135,0,147,0,135,0,135,0,135,0,147,0,135,135,0,147,135,0,147,0,135,0]}]},{e:7,t:0,o:0,ne:0,se:255,Ut:3,Qt:8,Zt:0,$t:0,re:0,ae:255,Yt:0,fe:127,Ft:22,Lt:88,Ht:3997,le:255,_e:3,ie:4067,te:234,st:4,rt:33,jt:2,he:84,oe:0,ce:1,Wt:3,ee:28,It:0,ye:[0,0,1,2,1,2,1,3],dt:[{pe:[0,0,142,0,154,0,0,0,142,0,0,0,154,0,0,0,0,0,142,0,154,0,0,0,142,0,0,0,154,0,0,0]},{pe:[0,0,147,0,154,0,0,0,147,0,0,0,154,0,0,0,0,0,147,0,154,0,147,0,0,0,154,0,0,0,154,0]},{pe:[0,0,147,0,154,0,0,0,147,0,0,0,154,0,0,0,0,0,147,0,154,0,0,0,147,0,0,0,0,0,0,0]}]},{e:8,t:0,o:0,ne:0,se:0,Ut:0,Qt:8,Zt:0,$t:0,re:0,ae:0,Yt:0,fe:255,Ft:140347,Lt:9216,Ht:133417,le:208,_e:2,ie:2500,te:16,st:2,rt:157,jt:8,he:207,oe:0,ce:1,Wt:2,ee:51,It:0,ye:[0,0,1,1,1,1,1,1],dt:[{pe:[147,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]}],Ct:5513,xe:9};fontString="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890_!@.'\"?/<()",fontBitmap="11111100011111110001100011111010001111101000111110111111000010000100000111111100100101000110001111101111110000111001000011111111111000011100100001000011111100001011110001111111000110001111111000110001111110010000100001001111111111000100001010010111101000110010111001001010001100001000010000100001111110001110111010110001100011000111001101011001110001011101000110001100010111011110100011001011100100000111010001100011001001111111101000111110100011000101111100000111000001111101111100100001000010000100100011000110001100010111010001100011000101010001001000110001101011010101110100010101000100010101000110001010100010000100001001111100010001000100011111001000110000100001000111001110100010001000100111111111000001001100000111110100101001011111000100001011111100001111000001111100111110000111101000101110111110000100010001000010001110100010111010001011100111010001011110000101110011101000110001100010111000000000000000000000111110010000100001000000000100111111000110111101011011101010111110101011111010100000000000000000000000100001100001000100000000000011011010011001000000000000111010001001100000000100000010001000100010001000000010001000100000100000100001000100001000010000010";const B=384,C=256,I=B*C,U=0,F=I,N=3*I,O=4*I,L=5*I,G=6*I,H=7*I,V=8*I;var j=document.Me("canvas"),z=j.J("2d"),W=0,X=I,Y=[4278190080,4281606178,4282132549,4281416038,4282078863,4280709599,4284915929,4288332782,4281791227,4283491737,4281384554,4285436983,4281297227,4280568658,4281941042,4285808447,4286734384,4292963931,4294941539,4293184863,4294761419,4294967295,4290227611,4287069828,4285164137,4283586137,4287251062,4281479852,4284700633,4290411479,4283078543,4281364362],J=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31];paldrk=[0,0,1,2,3,4,5,6,6,10,11,12,13,14,2,2,15,16,17,18,22,20,23,24,25,26,2,2,27,28,31,13],z.qe=!1,z.Re=!1,j.z=B,j.W=C;var Q=z.Ke(0,0,B,C),Z=new ArrayBuffer(Q.at.length),$=new Uint8Array(Z),tt=new Uint32Array(Z),et=new Uint8ClampedArray(B*C*10);Number.prototype.be=function(t,e){return Math.min(Math.max(this,t),e)};const ot=1,nt=2,rt=3,st=4,at=2,it=2;states={},init=(()=>{s(),last=0,dt=0,now=0,t=0,songTrigger=!1,state="spritesheet",A=new AudioContext,paused=!1,transition=!1,currentRoom=[0,0],player.Te(),stats=new Stats,document.De.K(stats.b),loop()}),window.A("keyup",function(t){Key.ge(t)},!1),window.A("keydown",function(t){Key.ke(t)},!1),window.A("blur",function(t){paused=!0},!1),window.A("focus",function(t){paused=!1},!1),loop=(e=>{if(paused);else{stats.B();let e=(new Date).getTime();dt=Math.min(1,(e-last)/1e3),dt>.014&&(dt=.016),t+=dt,states[state].Ae(dt),last=e,states[state].Se(),p(),stats.F(),requestAnimationFrame(loop)}}),world=[1,0,0,0,0,0,6,7,8],rooms=[{Ee:function(t){}},{Ee:function(t){}},{Ee:function(t){}},{Ee:function(t){h(0,0,127,256,27),h(250,0,127,256,27)}},{Ee:function(t){h(0,0,127,256,27),h(250,0,127,256,27)}},{Ee:function(t){}},{Ee:function(t){h(0,205,384,10,25)}},{Ee:function(t){d(0,256,384,256,182,205,25),h(100,70,20,80,24),h(100,140,100,20,23),h(200,820,10,100,23),h(210,70,100,100,22)}},{Ee:function(t){h(0,205,384,10,25),u(250,150,64,25)}}];new g.i(P);player={Te(){this.Ce=192,this.Pe=30,this.Ie=9,this.Oe=0,this.Ue=0,this.q=200,this.R=200,this.Xe=.8,this.Ye=8,this.Be=400,this.Fe=400,this.Ne=-400,this.Le=-400,this.He={},this.yo=!1},N(t){this.do(),this.mo=this.Ce,this.xo=this.Pe,this.Oe*=player.Xe,this.Ue+=player.Ye,this.Ue=this.Ue.be(this.Ne,this.Be),this.Oe=this.Oe.be(this.Le,this.Fe);let e=t*player.Oe,o=t*player.Ue;player.Ce+=e,this.do(),this.oo()&&(player.Ce=player.mo,player.Oe=.4*-player.Oe),player.Pe+=o,this.do(),this.oo()&&(player.Pe=player.xo,player.Ue=.4*-player.Ue),this.do(),this.oo()&&(this.Ce+=this.to(),this.do(),this.oo()&&(this.Pe+=this.eo(),this.do())),this.do(),console.Ge(this.oo()),(Key.Ve(Key.je)||Key.Ve(Key.ze))&&(player.yo=!1,player.Oe=player.q),(Key.Ve(Key.mt)||Key.Ve(Key.We))&&(this.yo=!0,player.Oe=-player.q),(Key.Ve(Key.Je)||Key.Ve(Key.Qe))&&(player.Ue=-player.R),(Key.Ve(Key.Ze)||Key.Ve(Key.$e))&&(player.Ue=player.R),player.Ce>B&&(player.Ce=0,w(nt)),player.Ce<0&&(player.Ce=B,w(ot)),player.Pe>C&&(player.Pe=0,w(st)),player.Pe<0&&(player.Pe=C,w(rt))},Ee(t){X=L,W=F,m(0,0,19,34,this.Ce-this.Ie|0,this.Pe-this.Ie-12|0,this.yo)},oo(){for(var t=-this.Ie;t<this.Ie;t++)for(var e=-this.Ie;e<this.Ie;e++)if(et[G+(this.He.Ce+t)+(this.He.Pe+e)*B])return!0;return!1},do(){this.He={u:this.Ce-this.Ie|0,h:this.Ce+this.Ie|0,v:this.Pe-this.Ie|0,M:this.Pe+this.Ie|0,z:2*this.Ie,W:2*this.Ie,Ce:0|this.Ce,Pe:0|this.Pe}},eo(t){let e=0,o=this.He;for(let t=o.u;t<=o.h;t++)if(et[G+t+B*o.M])for(let n=o.M;n>=o.v;n--)et[G+t+B*n]&&(e=n-o.M-1);for(let t=o.u;t<=o.h;t++)if(et[G+t+B*o.v])for(let n=o.v;n<=o.M;n++)et[G+t+B*n]&&(e=n-o.v+1);return e},to(t){let e=0,o=this.He;for(let t=o.v;t<=o.M;t++)if(et[G+o.u+B*t])for(let n=o.Ce;n<=o.h;n++)et[G+n+B*t]&&e++;else if(et[G+o.h+B*t])for(let n=o.Ce;n>=o.u;n--)et[G+n+B*t]&&e--;return e}},states.no={Ae:function(t){Key.Ve(Key.so)&&(state="menu")},Se:function(e){W=0,a(0),T(["GAME OVER",256,80+15*Math.sin(2.5*t),8+4*Math.cos(2.9*t),15+5*Math.sin(3.5*t),"center","top",9,27])}},states.ro={Ae:function(t){Key.Ve(Key.ye)&&(w(),state="game"),Key.Ve(Key._o)&&(state="spritesheet")},Se:function(e){W=G,a(0),W=0,a(0),W=F,a(0),W=N,a(0),W=U,a(0),W=G,T(["GREEBLE",B/2,150,20,20,"center","top",6,25]),W=F,X=G,m(),W=O,k.yt(1019);for(var o=9e3;--o;){let t=k.Rt(0,B),e=k.Rt(0,C);et[G+t+e*B]&&h(t+k.Rt(-2,2),e+k.Rt(-1,1),k.Rt(0,4),k.Rt(0,2),k.Rt(22,24))}v(O,N,25,20,23,18),W=F,X=O,m(),X=N,m(),X=L,x(0,0,19,34,192,60,1,t),T(["PRESS P TO CONTINUE",B/2,230,2,2,"center","top",1,21]),W=U;for(n=8e3;--n;)i(k.Rt(0,384),k.Rt(0,256),1);for(n=400;--n;)i(k.Rt(0,384),k.Rt(0,256),26);for(var n=100;--n;)i(k.Rt(0,384),k.Rt(0,256),21);v(F,U,15),X=F,m()}},states.ao={Ae(t){player.N(t)},Se(t){W=F,a(0),X=H,m(),player.Ee(),X=V,m(),W=U,a(1),X=F,m()}},states.wo={Ae:function(t){Key.Ve(Key.Ce)&&(state="menu")},Se:function(t){W=U,y(0,0,384,256,12,19,1),X=L,m();for(var e=0;e<32;e++)T([e.toString(),e<16?3+16*e:3+16*(e-16),e<16?40:56,1,1,1,"left",1,e,0])}},Key={fo:{},io:{},We:37,Qe:38,ze:39,$e:40,co:32,mt:65,Je:87,Ze:83,je:68,_o:90,Ce:88,ho:70,ye:80,so:82,Ve(t){return this.fo[t]},lo(t){return this.io[t]},ke(t){this.fo[t.uo]=!0},ge(t){this.io[t.uo]=!0,delete this.fo[t.uo]},N(){this.io={}}},window.vo=init()}();
</script></body></html>