<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>JS13K 2017 boilerplate</title><style>
body{margin:0;overflow:hidden;background:#111;color:#ccc}#canvas{position:fixed;top:50%;bottom:0;left:50%;right:0;width:144vmin;height:96vmin;transform:translate(-50%,-25%);image-rendering:optimizeSpeed;image-rendering:-moz-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:-o-crisp-edges;image-rendering:pixelated;-ms-interpolation-mode:nearest-neighbor;cursor:none;margin:auto}
</style></head><body><canvas id="canvas"></canvas><script>
var Stats=function(){function e(e){return o.appendChild(e.dom),e}function t(e){for(var t=0;t<o.children.length;t++)o.children[t].style.display=t===e?"block":"none";n=e}var n=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(e){e.preventDefault(),t(++n%o.children.length)},!1);var a=(performance||Date).now(),r=a,s=0,i=e(new Stats.Panel("FPS","#0ff","#002")),l=e(new Stats.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var f=e(new Stats.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:o,addPanel:e,showPanel:t,begin:function(){a=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(l.update(e-a,200),e>r+1e3&&(i.update(1e3*s/(e-r),100),r=e,s=0,f)){var t=performance.memory;f.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:o,setMode:t}};Stats.Panel=function(e,t,n){var o=1/0,a=0,r=Math.round,s=r(window.devicePixelRatio||1),i=80*s,l=48*s,f=3*s,c=2*s,u=3*s,d=15*s,h=74*s,y=30*s,_=document.createElement("canvas");_.width=i,_.height=l,_.style.cssText="width:80px;height:48px";var p=_.getContext("2d");return p.font="bold "+9*s+"px Helvetica,Arial,sans-serif",p.textBaseline="top",p.fillStyle=n,p.fillRect(0,0,i,l),p.fillStyle=t,p.fillText(e,f,c),p.fillRect(u,d,h,y),p.fillStyle=n,p.globalAlpha=.9,p.fillRect(u,d,h,y),{dom:_,update:function(l,x){o=Math.min(o,l),a=Math.max(a,l),p.fillStyle=n,p.globalAlpha=1,p.fillRect(0,0,i,d),p.fillStyle=t,p.fillText(r(l)+" "+e+" ("+r(o)+"-"+r(a)+")",f,c),p.drawImage(_,u+s,d,h-s,y,u,d,h-s,y),p.fillRect(u+h-s,d,s,y),p.fillStyle=n,p.globalAlpha=.9,p.fillRect(u+h-s,d,s,r((1-l/x)*y))}}},"object"==typeof module&&(module.exports=Stats),function(){function e(e){se.fill(e,Q,Q+j)}function n(e,t,n){e=(0|e).clamp(0,B-1),t=(0|t).clamp(0,z-1),n|=0,se[Q+t*B+e]=n}function o(e,t,n=Q){return se[n+e+t*B]}function a(e,t,o,a,r){var s,i,l=(a|=0)-(t|=0),f=(o|=0)-(e|=0);if(l<0?(l=-l,i=-1):i=1,f<0?(f=-f,s=-1):s=1,l<<=1,f<<=1,n(e,t,r),f>l)for(var c=l-(f>>1);e!=o;)c>=0&&(t+=i,c-=f),c+=l,n(e+=s,t,r);else for(c=f-(l>>1);t!=a;)c>=0&&(e+=s,c-=l),c+=f,n(e,t+=i,r)}function r(e,t,o,a){var r=-o,s=0,i=2-2*o;do{n(e-r,t+s,a),n(e-s,t-r,a),n(e+r,t-s,a),n(e+s,t+r,a),(o=i)<=s&&(i+=2*++s+1),(o>r||i>s)&&(i+=2*++r+1)}while(r<0)}function i(e,t,n,o){if(!(n<0)){e|=0,t|=0,o|=0;var r=-(n|=0),s=0,i=2-2*n;do{a(e-r,t-s,e+r,t-s,o),a(e-r,t+s,e+r,t+s,o),(n=i)<=s&&(i+=2*++s+1),(n>r||i>s)&&(i+=2*++r+1)}while(r<0)}}function l(e,t,n,o,r){x1=0|e,y1=0|t,x2=e+n|0,y2=t+o|0;var s=Math.abs(y2-y1);if(a(x1,y1,x2,y1,r),s>0)for(;--s;)a(x1,y1+s,x2,y1+s,r);a(x1,y2,x2,y2,r)}function f(e,t,n,o,a,r){for(let s=0;s<=a;s++)l(e+s,t-s,n-2*s,o+2*s,r)}function c(e,t,n,o=n,a=n,r=n){for(let s=0;s<=B;s++)for(let i=0;i<=z;i++){let l=s-1+i*B,f=s+1+i*B,c=s+(i+1)*B,u=s+(i-1)*B;se[e+(s+i*B)]&&(se[e+l]||(se[t+l]=n),se[e+f]||(se[t+f]=a),se[e+u]||(se[t+u]=o),se[e+c]||(se[t+c]=r))}}function u(e,t,n,o,a,r,s){var i=B,e=Math.round(16*e),n=Math.round(16*n),a=Math.round(16*a),t=Math.round(16*t),l=e-n,f=(o=Math.round(16*o))-t,c=n-a,u=(r=Math.round(16*r))-o,d=a-e,h=t-r,y=Math.max(Math.min(e,n,a)+15>>4,0),_=Math.min(Math.max(e,n,a)+15>>4,B),p=Math.max(Math.min(t,o,r)+15>>4,0),x=Math.min(Math.max(t,o,r)+15>>4,z);y&=-8,p&=-8;var m=-f*e-l*t,v=-u*n-c*o,g=-h*a-d*r;(f>0||0==f&&l>0)&&m++,(u>0||0==u&&c>0)&&v++,(h>0||0==h&&d>0)&&g++,m=m-1>>4,v=v-1>>4,g=g-1>>4;var w=0,R=0,K=0,I=0,b=0,D=0;l>=0?R-=7*l:w-=7*l,f>=0?R-=7*f:w-=7*f,c>=0?I-=7*c:K-=7*c,u>=0?I-=7*u:K-=7*u,d>=0?D-=7*d:b-=7*d,h>=0?D-=7*h:b-=7*h;for(var S=i-8,T=p;T<x;T+=8)for(var L=y;L<_;L+=8){var M=m+l*T+f*L,q=v+c*T+u*L,k=g+d*T+h*L;if(!(M<R||q<I||k<D)){var E=L+T*i;if(M>=w&&q>=K&&k>=b)for(A=0;A<8;A++){for(P=0;P<8;P++,E++)se[Q+E]=s;E+=S}else for(var A=0;A<8;A++){for(var G=M,j=q,C=k,P=0;P<8;P++)(G|j|C)>=0&&(se[Q+E]=s),G+=f,j+=u,C+=h,E++;M+=l,q+=c,k+=d,E+=S}}}}function d(e=0,t=0,n=384,o=256,a=0,r=0,s=!1,i=!1){for(var l=0;l<o;l++)for(var f=0;f<n;f++)r+l<z&&a+f<B&&r+l>-1&&a+f>-1&&(s&i?se[$+((t+(o-l))*B+e+(n-f))]>0&&(se[Q+((r+l)*B+a+f)]=te[se[$+((t+(o-l))*B+e+(n-f))]]):i&&!s?se[$+((t+(o-l))*B+e+f)]>0&&(se[Q+((r+l)*B+a+f)]=se[$+((t+(o-l))*B+e+f)]):s&&!i?se[$+((t+l)*B+e+(n-f))]>0&&(se[Q+((r+l)*B+a+f)]=se[$+((t+l)*B+e+(n-f))]):s||i||se[$+((t+l)*B+e+f)]>0&&(se[Q+((r+l)*B+a+f)]=te[se[$+((t+l)*B+e+f)]]))}function h(e,t,n,o,a,r,s,i){i*=.0174533;let l=n/2|0,f=o/2|0,c=n*s/2*1.41421356237|5,u=o*s/2*1.41421356237|5,d=-c,h=c,y=-u,_=u,p=1/s,x=Math.cos(-i)*p,m=Math.sin(-i)*p;for(let s=y;s<_;s++)for(let i=d;i<h;i++){let c=l+Math.round(x*i+m*s),u=f+Math.round(-m*i+x*s),d=i+a|0,h=s+r|0;c>=0&&u>=0&&c<n&&u<o&&se[$+(c+e)+(u+t)*B]>0&&(se[Q+d+h*B]=se[$+(c+e)+(u+t)*B])}}function _(){for(var e=j;e--;)re[e]=ee[te[se[e]]];ne.data.set(ae),Z.putImageData(ne,0,0)}function p(){e(0),Q=Y,$=Y,l(8,10,17,9,8),l(7,11,19,7,8),l(9,12,15,5,2),l(11,14,2,1,16),l(21,14,2,1,16),a(12,15,13,15,21),a(22,15,23,15,21),a(17,9,17,6,5),n(17,6,21),l(44,15,3,1,5),l(42,17,7,7,5),l(43,21,5,5,0),i(139,28,5,13),l(74,22,2,5,8),i(75,28,3,8),r(75,28,1,5),u(105,19,114,27,117,23,8),l(206,10,4,12,9),c(Y,P,23,21,31,23),$=P,d(),$=Y,d(128,0,32,40,165,4),d(32,0,32,32,162,5),d(64,0,32,32,165,4),d(96,0,32,32,165,3),d(0,0,32,32,160,0),d(32,0,32,32,162,45),d(0,0,32,32,160,40),d(32,0,32,32,162,85),d(96,0,32,32,165,83),d(0,0,32,32,160,80)}function m(e){return Math.sin(6.283184*e)}function v(e){return.00390625*Math.pow(1.059463094,e-128)}function g(e,t){setTimeout(function(){var n=new Uint8Array(e*de*2),o=n.length-2,a=function(){for(var e=new Date,r=0;o>=0;)if(n[o]=0,n[o+1]=128,o-=2,(r+=1)%1e3==0&&new Date-e>he)return void setTimeout(a,0);setTimeout(function(){t(n)},0)};setTimeout(a,0)},0)}function w(e,t,n,o,a){var r=n.fx_delay_time*o>>1,s=n.fx_delay_amt/255,i=0,l=function(){for(var n=new Date,o=0;i<t-r;){var f=4*i,c=4*(i+r),u=e[c]+(e[c+1]<<8)+(e[f+2]+(e[f+3]<<8)-32768)*s;if(e[c]=255&u,e[c+1]=u>>8&255,u=e[c+2]+(e[c+3]<<8)+(e[f]+(e[f+1]<<8)-32768)*s,e[c+2]=255&u,e[c+3]=u>>8&255,++i,(o+=1)%1e3==0&&new Date-n>he)return void setTimeout(l,0)}setTimeout(a,0)};setTimeout(l,0)}function R(e){let t=j*G;for(;--t;)se[t]=0;switch(p(),e){case pe:currentRoom[0]--,currentRoom[0]<0&&(currentRoom[0]=Te),console.log(currentRoom);break;case xe:currentRoom[0]++,currentRoom[0]>Te&&(currentRoom[0]=0),console.log(currentRoom);break;case me:currentRoom[1]--,currentRoom[1]<0&&(currentRoom[1]=Le),console.log(currentRoom);break;case ve:currentRoom[1]++,currentRoom[1]>Le&&(currentRoom[1]=0),console.log(currentRoom)}Q=N,rooms[world[currentRoom[1]*(Te+1)+currentRoom[0]]].draw()}function K(){Q=W,e(0),Q=X,e(0),Q=H,e(0),I(),L(),M(),D(),D(),S()}function I(){Q=W,e(0);let t=5e3;for(;--t;)n(ce.nextIntRange(0,384),ce.nextIntRange(0,256),1);for(t=200;--t;)n(ce.nextIntRange(0,384),ce.nextIntRange(0,256),26);for(t=60;--t;)n(ce.nextIntRange(0,384),ce.nextIntRange(0,256),20);for(t=20;--t;)n(ce.nextIntRange(0,384),ce.nextIntRange(0,256),21);for(t=3;--t;)i(ce.nextIntRange(0,384),ce.nextIntRange(0,256),ce.nextIntRange(2,5),ce.nextIntRange(16,19))}function b(){let e=j;for(;--e;)se[N+e]==be&&($=Y,Q=C,h(192,0,32,32,e%B-2,(e/B|0)-5,1,90*t))}function D(){$=N,Q=U,e(0);for(t=3e3;--t;){let e=ce.nextIntRange(0,B),t=ce.nextIntRange(0,z);o(e,t,N)==Ie&&l(e+ce.nextIntRange(-2,2),t+ce.nextIntRange(-2,2),ce.nextIntRange(2,6),1,2)}Q=O,e(0),c(U,O,1),Q=X,$=U,d(),$=O,d(),Q=U;for(var t=3e3;--t;){let e=ce.nextIntRange(0,B),t=ce.nextIntRange(0,z);o(e,t,N)==Ie&&l(e+ce.nextIntRange(-2,2),t+ce.nextIntRange(-2,2),1,ce.nextIntRange(2,5),2)}Q=O,e(0),c(U,O,1,4,1,1),Q=X,$=U,d(),$=O,d()}function S(){Q=U,e(0);for(var t=400;--t;){let e=ce.nextIntRange(0,B),t=ce.nextIntRange(0,z);se[N+e+t*B]==Ie&&(l(e+ce.nextIntRange(-5,0),t+ce.nextIntRange(-20,0),ce.nextIntRange(1,2),ce.nextIntRange(1,20),22),r(e,t-10,1,22))}Q=O,e(0),c(U,O,25,20,26,2),Q=H,$=U,d(),$=O,d()}function T(){Q=U,e(0);for(var t=1500;--t;){let e=ce.nextIntRange(0,B),t=ce.nextIntRange(0,z);se[N+e+t*B]==Ie&&f(e,t,ce.nextIntRange(5,13),ce.nextIntRange(2,4),1,25)}let n=2e3;for(;--n;){let e=ce.nextIntRange(0,B),t=ce.nextIntRange(0,z);se[N+e+t*B]==Ie&&l(e,t,ce.nextIntRange(3,7),ce.nextIntRange(1,3),0)}Q=O,e(0),c(U,O,1,23,24),Q=X,$=U,d(),$=O,d()}function L(){let e=j;for(;--e;)se[N+e]==Se&&(se[X+e]=ce.nextIntRange(2,4))}function M(){let e=j;for(;--e;)se[N+e]==De&&(se[X+e]=ce.nextIntRange(9,11))}function q(e=0,t=0,n=10,o=10,a=21,r=!1){this.x=e,this.y=t,this.maxSize=n,this.speed=10,this.counter=this.speed,this.color=a,this.size=1,this.filled=r,s=this}function k(e){for(var t=e[0].length,o=0;o<t;o++){var a=[];a=A(e[0].charAt(o));for(var r=0;r<5;r++)for(var s=0;s<5;s++)1==a[5*r+s]&&(1==e[4]?n(e[1]+s*e[4]+(5*e[4]+e[3])*o,e[2]+r*e[4],e[5]):l(e[1]+s*e[4]+(5*e[4]+e[3])*o,e[2]+r*e[4],e[4],e[4],e[5]))}}function E(e){var t=5*e[7],n=e[0].split("\n"),o=n.slice(0),a=n.length,r=o.sort(function(e,t){return t.length-e.length})[0],s=r.length*t+(r.length-1)*e[3],i=a*t+(a-1)*e[4];e[5]||(e[5]="left"),e[6]||(e[6]="bottom");var l=e[1],f=e[2],c=e[1]+s,u=e[2]+i;"center"==e[5]?(l=e[1]-s/2,c=e[1]+s/2):"right"==e[5]&&(l=e[1]-s,c=e[1]),"center"==e[6]?(f=e[2]-i/2,u=e[2]+i/2):"bottom"==e[6]&&(f=e[2]-i,u=e[2]);for(var d=l+s/2,h=f+i/2,y=0;y<a;y++){var _=n[y],p=_.length*t+(_.length-1)*e[3],x=e[1],m=e[2]+(t+e[4])*y;"center"==e[5]?x=e[1]-p/2:"right"==e[5]&&(x=e[1]-p),"center"==e[6]?m-=i/2:"bottom"==e[6]&&(m-=i),k([_,x,m,e[3]||0,e[7]||1,e[8],e[9]])}return{sx:l,sy:f,cx:d,cy:h,ex:c,ey:u,width:s,height:i}}function A(e){return index=fontString.indexOf(e),fontBitmap.substring(25*index,25*index+25).split("")}const B=384,z=256,G=11,j=B*z,C=0,P=j,F=2*j,U=3*j,O=4*j,Y=10*j,N=6*j,X=7*j,H=8*j,W=9*j,J=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31];var V=document.getElementById("canvas"),Z=V.getContext("2d"),Q=0,$=j,ee=[4278190080,4281606178,4282132549,4281416038,4282078863,4280709599,4284915929,4288332782,4281791227,4283491737,4281384554,4285436983,4281297227,4280568658,4281941042,4285808447,4286734384,4292963931,4294941539,4293184863,4294761419,4294967295,4290227611,4287069828,4285164137,4283586137,4287251062,4281479852,4284700633,4290411479,4283078543,4281364362],te=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31];paldrk=[0,0,1,2,3,4,5,6,6,10,11,12,13,14,2,2,15,16,17,18,22,20,23,24,25,26,2,2,27,28,31,13],Z.imageSmoothingEnabled=!1,Z.mozImageSmoothingEnabled=!1,V.width=B,V.height=z;var ne=Z.getImageData(0,0,B,z),oe=new ArrayBuffer(ne.data.length),ae=new Uint8Array(oe),re=new Uint32Array(oe),se=new Uint8ClampedArray(B*z*G);Number.prototype.clamp=function(e,t){return Math.min(Math.max(this,e),t)},Number.prototype.map=function(e,t,n,o){return(this-e)/(t-e)*(o-n)+n};var ie={rowLen:5513,endPattern:17,songData:[{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:128,osc1_waveform:2,osc2_oct:6,osc2_det:0,osc2_detune:9,osc2_xenv:0,osc2_vol:142,osc2_waveform:3,noise_fader:0,env_attack:137,env_sustain:2653,env_release:1979,env_master:155,fx_filter:3,fx_freq:1052,fx_resonance:154,fx_delay_time:6,fx_delay_amt:25,fx_pan_freq:8,fx_pan_amt:144,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:3,lfo_amt:69,lfo_waveform:0,p:[2,2,3,3,2,2,3,3,2,2,3,3,2,2,3,3],c:[{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[171,166,169,171,174,171,169,171,0,166,169,171,174,171,169,171,171,166,169,171,174,171,169,171,0,166,169,171,174,171,169,171]},{n:[169,164,167,169,172,169,167,169,0,164,167,169,172,169,167,169,169,164,167,169,172,169,167,169,0,164,167,169,172,169,167,169]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:116,osc1_waveform:1,osc2_oct:8,osc2_det:0,osc2_detune:8,osc2_xenv:0,osc2_vol:255,osc2_waveform:2,noise_fader:0,env_attack:351,env_sustain:4611,env_release:1403,env_master:199,fx_filter:2,fx_freq:200,fx_resonance:254,fx_delay_time:5,fx_delay_amt:12,fx_pan_freq:0,fx_pan_amt:214,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:0,lfo_amt:87,lfo_waveform:3,p:[1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2],c:[{n:[123,0,0,121,0,0,123,0,0,0,0,0,0,0,121,0,123,0,0,121,0,0,123,0,0,0,0,0,0,0,0,0]},{n:[121,0,0,119,0,0,121,0,0,0,0,0,0,0,119,0,121,0,0,119,0,0,121,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:6,osc1_det:0,osc1_detune:0,osc1_xenv:1,osc1_vol:162,osc1_waveform:0,osc2_oct:6,osc2_det:0,osc2_detune:0,osc2_xenv:1,osc2_vol:162,osc2_waveform:0,noise_fader:14,env_attack:50,env_sustain:150,env_release:8181,env_master:161,fx_filter:2,fx_freq:5900,fx_resonance:240,fx_delay_time:4,fx_delay_amt:33,fx_pan_freq:0,fx_pan_amt:0,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:0,lfo_amt:0,lfo_waveform:0,p:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[123,0,0,123,0,0,0,123,123,0,0,0,0,0,0,0,123,0,0,0,0,0,0,0,123,0,0,0,0,0,0,0]}]},{osc1_oct:8,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:0,osc1_waveform:0,osc2_oct:8,osc2_det:0,osc2_detune:0,osc2_xenv:0,osc2_vol:0,osc2_waveform:0,noise_fader:29,env_attack:50,env_sustain:419,env_release:4607,env_master:130,fx_filter:2,fx_freq:10332,fx_resonance:120,fx_delay_time:4,fx_delay_amt:16,fx_pan_freq:5,fx_pan_amt:108,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:5,lfo_amt:187,lfo_waveform:0,p:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[0,123,123,123,0,123,123,123,0,123,0,123,0,123,123,123,0,123,123,123,0,123,0,123,0,123,123,123,0,123,123,123]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:255,osc1_waveform:2,osc2_oct:7,osc2_det:0,osc2_detune:4,osc2_xenv:0,osc2_vol:154,osc2_waveform:2,noise_fader:0,env_attack:197,env_sustain:13163,env_release:10614,env_master:180,fx_filter:2,fx_freq:1792,fx_resonance:136,fx_delay_time:6,fx_delay_amt:81,fx_pan_freq:3,fx_pan_amt:151,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:0,lfo_amt:0,lfo_waveform:0,p:[1,2,3,4,5,2,3,4,5,2,3,4,5,2,3,4],c:[{n:[162,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,164,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[166,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,171,0,0,0,0,0,0,0,166,0,0,0,0,0,0,0]},{n:[164,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,162,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[164,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,169,0,0,0,0,0,0,0,0,0,0,0,167,0,0,0]},{n:[166,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,164,0,0,0,0,0,0,0,0,0,0,0,167,0,0,0]}]}],songLen:69},le={rowLen:5513,endPattern:21,songData:[{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:191,osc1_waveform:1,osc2_oct:7,osc2_det:0,osc2_detune:0,osc2_xenv:0,osc2_vol:125,osc2_waveform:1,noise_fader:0,env_attack:200,env_sustain:2e3,env_release:2418,env_master:73,fx_filter:2,fx_freq:6620,fx_resonance:130,fx_delay_time:6,fx_delay_amt:48,fx_pan_freq:4,fx_pan_amt:0,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:0,lfo_amt:0,lfo_waveform:0,p:[1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],c:[{n:[137,0,140,0,144,0,147,0,137,0,140,0,144,0,147,0,137,0,140,0,144,0,147,0,137,0,140,0,144,0,147,0]},{n:[137,0,140,0,144,0,146,0,137,0,140,0,144,0,146,0,137,0,140,0,144,0,146,0,137,0,140,0,144,0,146,0]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:255,osc1_waveform:1,osc2_oct:7,osc2_det:0,osc2_detune:9,osc2_xenv:0,osc2_vol:154,osc2_waveform:1,noise_fader:0,env_attack:197,env_sustain:1776,env_release:1403,env_master:45,fx_filter:0,fx_freq:11025,fx_resonance:255,fx_delay_time:2,fx_delay_amt:65,fx_pan_freq:3,fx_pan_amt:47,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:0,lfo_amt:0,lfo_waveform:0,p:[1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],c:[{n:[125,0,0,123,0,0,125,0,0,0,0,0,0,0,123,0,125,0,0,123,0,0,125,0,0,0,0,0,0,0,0,0]},{n:[130,0,0,128,0,0,130,0,0,0,0,0,0,0,128,0,130,0,0,128,0,0,130,0,0,0,0,0,0,0,0,0]}]}],songLen:85},fe={osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:1,osc1_vol:117,osc1_waveform:3,osc2_oct:7,osc2_det:0,osc2_detune:0,osc2_xenv:1,osc2_vol:155,osc2_waveform:2,noise_fader:0,env_attack:7105,env_sustain:0,env_release:444,env_master:192,fx_filter:0,fx_freq:11025,fx_resonance:255,fx_delay_time:2,fx_delay_amt:16,fx_pan_freq:0,fx_pan_amt:0,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:0,lfo_amt:59,lfo_waveform:0};fontString="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890_!@#.'\"?/<()",fontBitmap="11111100011111110001100011111010001111101000111110111111000010000100000111111100100101000110001111101111110000111001000011111111111000011100100001000011111100001011110001111111000110001111111000110001111110010000100001001111111111000100001010010111101000110010111001001010001100001000010000100001111110001110111010110001100011000111001101011001110001011101000110001100010111011110100011001011100100000111010001100011001001111111101000111110100011000101111100000111000001111101111100100001000010000100100011000110001100010111010001100011000101010001001000110001101011010101110100010101000100010101000110001010100010000100001001111100010001000100011111001000110000100001000111001110100010001000100111111111000001001100000111110100101001011111000100001011111100001111000001111100111110000111101000101110111110000100010001000010001110100010111010001011100111010001011110000101110011101000110001100010111000000000000000000000111110010000100001000000000100111111000110111101011011101010111110101011111010100000000000000000000000100001100001000100000000000011011010011001000000000000111010001001100000000100000010001000100010001000000010001000100000100000100001000100001000010000010";var ce={seed:Date.now(),a:1664525,c:1013904223,m:Math.pow(2,32),setSeed:function(e){this.seed=e},nextInt:function(){return this.seed=(this.seed*this.a+this.c)%this.m,this.seed},nextFloat:function(){return this.nextInt()/this.m},nextBool:function(e){return null==e&&(e=.5),this.nextFloat()<e},nextFloatRange:function(e,t){return e+this.nextFloat()*(t-e)},nextIntRange:function(e,t){return Math.floor(this.nextFloatRange(e,t))},nextColor:function(){for(var e=this.nextIntRange(0,Math.pow(2,24)).toString(16).toUpperCase();e.length<6;)e="0"+e;return"#"+e}},ue={},de=2,he=33,ye=null,_e=[m,function(e){return m(e)<0?-1:1},function(e){return e%1-.5},function(e){var t=e%1*4;return t<2?t-1:3-t}];ue.AudioGenerator=function(e){this.mixBuf=e,this.waveSize=e.length/de/2},ue.AudioGenerator.prototype.getAudioBuffer=function(e){null===ye&&(ye=new AudioContext);var t=this.mixBuf,n=this.waveSize*de*2,o=ye.createBuffer(de,this.waveSize,44100),a=o.getChannelData(0),r=o.getChannelData(1),s=0,i=function(){for(var l=new Date,f=0;s<n/2;){var c=4*(t[4*s]+(t[4*s+1]<<8)-32768);if(c=c<-32768?-32768:c>32767?32767:c,a[s]=c/32768,c=4*(t[4*s+2]+(t[4*s+3]<<8)-32768),c=c<-32768?-32768:c>32767?32767:c,r[s]=c/32768,s+=1,(f+=1)%1e3==0&&new Date-l>he)return void setTimeout(i,0)}setTimeout(function(){e(o)},0)};setTimeout(i,0)},ue.SoundGenerator=function(e,t){this.instr=e,this.rowLen=t||5605,this.osc_lfo=_e[e.lfo_waveform],this.osc1=_e[e.osc1_waveform],this.osc2=_e[e.osc2_waveform],this.attack=e.env_attack,this.sustain=e.env_sustain,this.release=e.env_release,this.panFreq=Math.pow(2,e.fx_pan_freq-8)/this.rowLen,this.lfoFreq=Math.pow(2,e.lfo_freq-8)/this.rowLen},ue.SoundGenerator.prototype.genSound=function(e,t,n){new Date;for(var o=0,a=0,r=v(e+12*(this.instr.osc1_oct-8)+this.instr.osc1_det)*(1+8e-4*this.instr.osc1_detune),s=v(e+12*(this.instr.osc2_oct-8)+this.instr.osc2_det)*(1+8e-4*this.instr.osc2_detune),i=this.instr.fx_resonance/255,l=0,f=0,c=this.attack+this.sustain+this.release-1;c>=0;--c){var u=c+n,d=this.osc_lfo(u*this.lfoFreq)*this.instr.lfo_amt/512+.5,h=1;c<this.attack?h=c/this.attack:c>=this.attack+this.sustain&&(h-=(c-this.attack-this.sustain)/this.release);var y=r;this.instr.lfo_osc1_freq&&(y+=d),this.instr.osc1_xenv&&(y*=h*h),o+=y;var _=this.osc1(o)*this.instr.osc1_vol;y=s,this.instr.osc2_xenv&&(y*=h*h),a+=y,_+=this.osc2(a)*this.instr.osc2_vol,this.instr.noise_fader&&(_+=(2*Math.random()-1)*this.instr.noise_fader*h),_*=h/255;var p=this.instr.fx_freq;this.instr.lfo_fx_freq&&(p*=d);var x=i*(_-f)-(l+=(p=1.5*Math.sin(3.141592*p/44100))*f);switch(f+=p*x,this.instr.fx_filter){case 1:_=x;break;case 2:_=l;break;case 3:_=f;break;case 4:_=l+x}if(y=m(u*this.panFreq)*this.instr.fx_pan_amt/512+.5,_*=39*this.instr.env_master,(u*=4)+3<t.length){var g=t[u]+(t[u+1]<<8)+_*(1-y);t[u]=255&g,t[u+1]=g>>8&255,g=t[u+2]+(t[u+3]<<8)+_*y,t[u+2]=255&g,t[u+3]=g>>8&255}}},ue.SoundGenerator.prototype.getAudioGenerator=function(e,t){var n=this.attack+this.sustain+this.release-1+32*this.rowLen,o=this;g(n,function(a){o.genSound(e,a,0),w(a,n,o.instr,o.rowLen,function(){t(new ue.AudioGenerator(a))})})},ue.SoundGenerator.prototype.createAudioBuffer=function(e,t){this.getAudioGenerator(e,function(e){e.getAudioBuffer(t)})},ue.MusicGenerator=function(e){this.song=e,this.waveSize=44100*e.songLen},ue.MusicGenerator.prototype.generateTrack=function(e,t,n){var o=this;g(this.waveSize,function(a){var r=o.waveSize,s=o.waveSize*de*2,i=o.song.rowLen,l=o.song.endPattern,f=new ue.SoundGenerator(e,i),c=0,u=0,d=0,h=function(){for(var t=new Date;;)if(32!==d){if(u===l-1)return void setTimeout(y,0);var n=e.p[u];if(n){var o=e.c[n-1].n[d];o&&f.genSound(o,a,c)}if(c+=i,d+=1,new Date-t>he)return void setTimeout(h,0)}else d=0,u+=1},y=function(){w(a,r,e,i,p)},_=0,p=function(){for(var e=new Date,o=0;_<s;){var r=t[_]+(t[_+1]<<8)+a[_]+(a[_+1]<<8)-32768;if(t[_]=255&r,t[_+1]=r>>8&255,_+=2,(o+=1)%1e3==0&&new Date-e>he)return void setTimeout(p,0)}setTimeout(n,0)};setTimeout(h,0)})},ue.MusicGenerator.prototype.getAudioGenerator=function(e){var t=this;g(this.waveSize,function(n){var o=0,a=function(){o<t.song.songData.length?(o+=1,t.generateTrack(t.song.songData[o-1],n,a)):e(new ue.AudioGenerator(n))};a()})},ue.MusicGenerator.prototype.createAudioBuffer=function(e){this.getAudioGenerator(function(t){t.getAudioBuffer(e)})},states={},init=(()=>{ce.nextInt(),sounds={},soundsLoaded=0,totalSounds=3,score=0,fuelTimer=100,parts=0,last=0,dt=0,now=0,t=0,state="menu",splodes=[],paused=!1,transition=!1,s_titleSong=!1,s_gameSong=!1,s_jump=!1,ye=new AudioContext,p(),player.init(),stats=new Stats,document.body.appendChild(stats.dom),loop()}),window.addEventListener("keyup",function(e){Key.onKeyup(e)},!1),window.addEventListener("keydown",function(e){Key.onKeydown(e)},!1),window.addEventListener("blur",function(e){paused=!0},!1),window.addEventListener("focus",function(e){paused=!1},!1),loop=(e=>{if(stats.begin(),paused)te=paldrk,E(["PAUSED",192,128,1,1,1,"center",1,21,0]);else{te=J;let e=(new Date).getTime();dt=Math.min(1,(e-last)/1e3),t+=dt,states[state].step(dt),last=e,states[state].render()}_(),stats.end(),requestAnimationFrame(loop)}),world=[8,7,0,0,0,0,0,0,0,0,0,2,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,2,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,8,7,6,6,8,6,6,6];const pe=1,xe=2,me=3,ve=4,ge=1,we=2,Re=3,Ke=4,Ie=21,be=8,De=9,Se=4,Te=9,Le=5;currentRoom=[0,0],rooms=[{draw:function(e){I(),D(),S()}},{draw:function(e){i(192,128,50,Ie),I(),D(),S()}},{draw:function(e){r(192,128,64,Ie),I(),D(),S()}},{draw:function(e){l(0,0,127,256,Ie),l(250,0,127,256,Ie),I(),D(),S()}},{draw:function(e){l(0,0,127,256,Ie),l(250,0,127,256,Ie),I(),D(),S()}},{draw:function(e){}},{draw:function(e){l(0,205,384,100,Ie),l(0,150,100,100,Se),l(300,150,100,100,De);let t=100;for(;--t;)x=ce.nextIntRange(0,B),y=ce.nextIntRange(100,200),n(x,y,be);I(),L(),M(),D(),S()}},{draw:function(e){u(0,256,384,256,182,205,Ie),l(100,70,20,80,Ie),l(100,140,100,20,Ie),l(200,820,10,100,Ie),l(210,70,100,100,Ie),I(),D(),T()}},{draw:function(e){l(0,205,384,10,Ie),i(250,150,64,Ie),i(250,150,50,De),n(50,180,be),I(),M(),D(),D(),T()}}],player={init(){this.x=192,this.y=30,this.radius=20,this.hitRadius=8,this.xvel=0,this.yvel=0,this.xspeed=80,this.yspeed=80,this.drag=.8,this.gravity=8,this.maxYvel=400,this.maxXvel=200,this.minYvel=-400,this.minXvel=-200,this.b={},this.facingLeft=!1,this.jumping=!0,this.jumpCooldown=0,this.angle=0,this.mode=ge},update(e){Key.isDown(Key.ONE)&&(player.mode=ge),Key.isDown(Key.TWO)&&(player.mode=we),Key.isDown(Key.THREE)&&(player.mode=Re),Key.isDown(Key.FOUR)&&(player.mode=Ke),this.updateB(),this.oldX=this.x,this.oldY=this.y,this.xvel*=player.drag,this.yvel+=player.gravity,this.yvel=this.yvel.clamp(this.minYvel,this.maxYvel),this.xvel=this.xvel.clamp(this.minXvel,this.maxXvel);let t=e*player.xvel,n=e*player.yvel;switch(player.x+=t,this.updateB(),this.collides()&&(player.x=player.oldX,player.xvel=.4*-player.xvel),player.y+=n,this.updateB(),this.collides()&&(player.y=player.oldY,player.yvel=.4*-player.yvel),this.updateB(),this.collides()&&(this.x+=this.collideResolutionX(),this.updateB(),this.collides()&&(this.y+=this.collideResolutionY(),this.updateB())),this.overlapResolution(),this.updateB(),player.mode){case ge:(Key.isDown(Key.d)||Key.isDown(Key.RIGHT))&&(player.facingLeft=!1,this.jumping?player.xvel=player.xspeed:player.xvel=0),(Key.isDown(Key.a)||Key.isDown(Key.LEFT))&&(this.facingLeft=!0,this.jumping?player.xvel=-player.xspeed:player.xvel=0),(Key.isDown(Key.w)||Key.isDown(Key.UP))&&!this.jumping&&fuelTimer>0&&player.jumpCooldown<0&&(this.jumping=!0,s_jump=!0,player.jumpCooldown=50,player.yvel=-player.yspeed),player.angle-=player.xvel/30,player.jumping&&(player.angle-=player.facingLeft?-player.yvel/30:player.yvel/30),player.jumpCooldown--;break;case we:player.maxXvel=150,player.minYvel=-150,player.xspeed=150,player.yspeed=150,(Key.isDown(Key.d)||Key.isDown(Key.RIGHT))&&(player.facingLeft=!1,player.xvel=player.xspeed),(Key.isDown(Key.a)||Key.isDown(Key.LEFT))&&(this.facingLeft=!0,player.xvel=-player.xspeed),(Key.isDown(Key.w)||Key.isDown(Key.UP)||Key.isDown(Key.UP))&&!this.jumping&&fuelTimer>0&&(fuelTimer-=1,this.jumping=!0,s_jump=!0,player.yvel=-player.yspeed),this.yvel>50&&(this.jumping=!1);break;case Re:player.maxXvel=150,player.minYvel=-150,player.xspeed=150,player.yspeed=150,(Key.isDown(Key.d)||Key.isDown(Key.RIGHT))&&(player.facingLeft=!1,player.xvel=player.xspeed),(Key.isDown(Key.a)||Key.isDown(Key.LEFT))&&(this.facingLeft=!0,player.xvel=-player.xspeed),(Key.isDown(Key.w)||Key.isDown(Key.UP)||Key.isDown(Key.SPACE))&&!this.jumping&&fuelTimer>0&&(fuelTimer-=.7,this.jumping=!0,s_jump=!0,player.yvel=-player.yspeed),Key.isDown(Key.x)&&(splodes.push(new q(player.x+(player.facingLeft?-16:16),player.y)),Q=N,i(player.x+(player.facingLeft?-16:16),player.y,16,0),K());break;case Ke:player.maxXvel=400,player.minYvel=-600,player.xspeed=300,player.yspeed=300,(Key.isDown(Key.d)||Key.isDown(Key.RIGHT))&&(player.facingLeft=!1,player.xvel=player.xspeed),(Key.isDown(Key.a)||Key.isDown(Key.LEFT))&&(this.facingLeft=!0,player.xvel=-player.xspeed),(Key.isDown(Key.w)||Key.isDown(Key.UP))&&(player.yvel=-player.yspeed)}player.x>B&&(player.x=0,R(xe)),player.x<0&&(player.x=B,R(pe)),player.y>z&&(player.y=0,R(ve)),player.y<0&&(player.y=z,R(me))},draw(e){switch(player.mode){case ge:$=Y,h(0,0,32,32,player.x,player.y,1,player.angle);break;case we:$=Y,d(32,0,32,32,player.b.x+2-16,player.b.y+5-24),d(0,0,32,32,player.b.x-16,player.b.y-24,player.facingLeft);break;case Re:$=Y,d(32,0,32,32,player.b.x+2-16,player.b.y+5-20),d(96,0,32,32,player.b.x+5-16+(this.facingLeft?-12:0),player.b.y+3-20,this.facingLeft),d(0,0,32,32,player.b.x-16,player.b.y-20,player.facingLeft);break;case Ke:$=Y,d(128,0,32,40,player.b.x+5-16,player.b.y+4-30),d(32,0,32,32,player.b.x+2-16,player.b.y+5-30),d(64,0,32,32,player.b.x+5-16,player.b.y+4-30),d(96,0,32,32,player.b.x+5-16+(this.facingLeft?-12:0),player.b.y+3-30,this.facingLeft),d(0,0,32,32,player.b.x-16,player.b.y-30,player.facingLeft)}},collides(){for(var e=-this.hitRadius;e<this.hitRadius;e++)for(var t=-this.hitRadius;t<this.hitRadius;t++){let n=se[N+(this.b.x+e)+(this.b.y+t)*B];if(n==Ie||n==Se||n==De)return player.jumping=!1,!0}return!1},overlaps(){for(var e=-this.radius;e<this.radius;e++)for(var t=-this.radius;t<this.radius;t++){let n=se[N+(this.b.x+e)+(this.b.y+t)*B];if(n)return{x:this.b.x+e,y:this.b.y+t,o:n}}return!1},updateB(){this.b={left:this.x-this.radius|0,right:this.x+this.radius|0,top:this.y-this.radius|0,bottom:this.y+this.radius|0,width:2*this.radius,height:2*this.radius,x:0|this.x,y:0|this.y}},collideResolutionY(e){let t=0,n=this.b;for(let e=n.left;e<=n.right;e++){let o=se[N+e+B*n.bottom];if(o==Ie||o==Se||o==De)for(let o=n.bottom;o>=n.top;o--){let a=se[N+e+B*o];a!=Ie&&a!=Se&&a!=De||(t=o-n.bottom-1)}}for(let e=n.left;e<=n.right;e++){let o=se[N+e+B*n.top];if(o==Ie||o==Se||o==De)for(let o=n.top;o<=n.bottom;o++){let a=se[N+e+B*o];a!=Ie&&a!=Se&&a!=De||(t=o-n.top+1)}}return t},collideResolutionX(e){let t=0,n=this.b;for(let e=n.top;e<=n.bottom;e++){let o=se[N+n.left+B*e];if(o==Ie||o==Se||o==De)for(let o=n.x;o<=n.right;o++){let n=se[N+o+B*e];n!=Ie&&n!=Se&&n!=De||t++}else{let o=se[N+n.right+B*e];if(o==Ie||o==Se||o==De)for(let o=n.x;o>=n.left;o--){let n=se[N+o+B*e];n!=Ie&&n!=Se&&n!=De||t--}}}return t},overlapResolution(e){let t=player.overlaps();switch(t.o){case be:se[N+t.x+t.y*B],Q=N,i(t.x,t.y,3,0),Q=P,splodes.push(new q(t.x,t.y)),fuelTimer+=.5}}},q.prototype.draw=function(){++this.size>this.maxSize||(this.filled?i(this.x,this.y,this.size,this.color):r(this.x,this.y,this.size,this.color),0==--this.counter&&(this.size++,this.counter=this.speed))},function(e=0,t=0,n=10,o=10,a=21,r=!1){this.x=e,this.y=t,this.maxSize=n,this.speed=10,this.counter=this.speed,this.color=a,this.size=1,this.filled=r,s=this}.prototype.draw=function(){++this.size>this.maxSize||(this.filled?i(this.x,this.y,this.size,this.color):r(this.x,this.y,this.size,this.color),0==--this.counter&&(this.size++,this.counter=this.speed))},states.gameover={step:function(e){Key.isDown(Key.r)&&(state="menu")},render:function(t){Q=0,e(0),E(["CRITICAL SYSTEM\nFAILURE",192,80,8,15,"center","top",3,27])}},states.menu={step:function(e){Key.justReleased(Key.p)&&(R(),state="game"),Key.justReleased(Key.r)&&(state="spritesheet")},render:function(o){Q=N,e(0),Q=0,e(0),Q=P,e(0),Q=U,e(0),Q=C,e(0),Q=N,E(["GREEBLE",B/2,150,20,20,"center","top",6,25]),Q=P,$=N,d(),Q=O,ce.setSeed(21);for(a=6e3;--a;){let e=ce.nextIntRange(0,B),t=ce.nextIntRange(0,z);se[N+e+t*B]&&l(e+ce.nextIntRange(-2,2),t+ce.nextIntRange(-1,1),1,ce.nextIntRange(0,3),ce.nextIntRange(24,25))}c(O,U,25,20,23,18),Q=P,$=O,d(),$=U,d(),Q=O,ce.setSeed(20);for(var a=6e3;--a;){let e=ce.nextIntRange(0,B),t=ce.nextIntRange(0,z);se[N+e+t*B]&&l(e+ce.nextIntRange(-1,1),t+ce.nextIntRange(0,1),ce.nextIntRange(1,5),1,ce.nextIntRange(22,24))}c(O,U,25,20,23,18),Q=P,$=O,d(),$=U,d(),player.draw(),$=Y;let r=8;for(;--r;)d(160,0,32,40,192+25*r,40);h(1,1,25,36,64,64,1,45),E(["PRESS P TO CONTINUE",B/2,230,2,2,"center","top",1,21]),Q=C;for(s=8e3;--s;)n((ce.nextIntRange(0,384)+10*t|0)%384,ce.nextIntRange(0,256),1);for(s=400;--s;)n((ce.nextIntRange(0,384)+20*t|0)%384,ce.nextIntRange(0,256),26);for(var s=100;--s;)n((ce.nextIntRange(0,384)+30*t|0)%384,ce.nextIntRange(0,256),21);c(P,C,15),$=P,d()}},states.game={step(e){Key.isDown(Key.f)&&(state="spritesheet"),player.update(e),fuelTimer-=e},render(t){if(Q=C,e(0),$=W,d(),Q=P,e(0),b(),$=X,d(),player.draw(),$=H,d(),Q=C,fuelTimer)if(fuelTimer>20)$=P,d(),$=F,d();else{Q=C,e(0);let t=1e3;for(;t--;)n(Math.random()*B,Math.random()*z,2);c(P,C,9)}else{Q=C,e(0);let t=2e3;for(;t--;){let e=Math.random()*B|0,t=Math.random()*z|0;r(e,t,1,se[P+e+t*B]?27:0)}}Q=C,E([fuelTimer.toFixed(2).toString(),B/2,10,2,2,"center","top",1,9]),splodes.forEach(function(e){e.draw()})}},states.loading={init:function(e){var t=new ue.MusicGenerator(ie);t.createAudioBuffer(function(e){sounds.titleMusic=e,soundsLoaded++}),(t=new ue.MusicGenerator(le)).createAudioBuffer(function(e){sounds.gameMusic=e,soundsLoaded++}),new ue.SoundGenerator(fe).createAudioBuffer(147,function(e){ye.createBufferSource();sounds.jump=e,soundsLoaded++})},step:function(e){Key.justReleased(Key.z)&&(state="menu")},render:function(t){Q=C,e(0),E(soundsLoaded!=totalSounds?["LOADING...",B/2,128,2,2,"center","top",2,9]:["PRESS Z TO CONTINUE",B/2,128,2,2,"center","top",2,9])}},states.spritesheet={step:function(e){Key.isDown(Key.x)&&(R(),state="menu"),Key.isDown(Key.p)&&(state="game")},render:function(n){Q=C,e(0),$=Y,d(),d(0,0,22,34,300,100),h(0,0,32,32,16,112,1,15+90*t),h(32,0,32,32,48,112,1,15+90*t),h(64,0,32,32,80,112,1,15+90*t);for(var o=0;o<32;o++)E([o.toString(),o<16?3+16*o:3+16*(o-16),o<16?200:216,1,1,1,"left",1,o,0])}},Key={_pressed:{},_released:{},LEFT:37,UP:38,RIGHT:39,DOWN:40,SPACE:32,ONE:49,TWO:50,THREE:51,FOUR:52,a:65,w:87,s:83,d:68,z:90,x:88,f:70,p:80,r:82,isDown(e){return this._pressed[e]},justReleased(e){return this._released[e]},onKeydown(e){this._pressed[e.keyCode]=!0},onKeyup(e){this._released[e.keyCode]=!0,delete this._pressed[e.keyCode]},update(){this._released={}}},window.onload=init()}();
</script></body></html>