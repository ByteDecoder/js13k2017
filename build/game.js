var Stats=function(){function e(e){return o.appendChild(e.dom),e}function t(e){for(var t=0;t<o.children.length;t++)o.children[t].style.display=t===e?"block":"none";n=e}var n=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(e){e.preventDefault(),t(++n%o.children.length)},!1);var s=(performance||Date).now(),a=s,r=0,i=e(new Stats.Panel("FPS","#0ff","#002")),f=e(new Stats.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=e(new Stats.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:o,addPanel:e,showPanel:t,begin:function(){s=(performance||Date).now()},end:function(){r++;var e=(performance||Date).now();if(f.update(e-s,200),e>a+1e3&&(i.update(1e3*r/(e-a),100),a=e,r=0,l)){var t=performance.memory;l.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){s=this.end()},domElement:o,setMode:t}};Stats.Panel=function(e,t,n){var o=1/0,s=0,a=Math.round,r=a(window.devicePixelRatio||1),i=80*r,f=48*r,l=3*r,c=2*r,u=3*r,d=15*r,_=74*r,h=30*r,x=document.createElement("canvas");x.width=i,x.height=f,x.style.cssText="width:80px;height:48px";var v=x.getContext("2d");return v.font="bold "+9*r+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=n,v.fillRect(0,0,i,f),v.fillStyle=t,v.fillText(e,l,c),v.fillRect(u,d,_,h),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(u,d,_,h),{dom:x,update:function(f,p){o=Math.min(o,f),s=Math.max(s,f),v.fillStyle=n,v.globalAlpha=1,v.fillRect(0,0,i,d),v.fillStyle=t,v.fillText(a(f)+" "+e+" ("+a(o)+"-"+a(s)+")",l,c),v.drawImage(x,u+r,d,_-r,h,u,d,_-r,h),v.fillRect(u+_-r,d,r,h),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(u+_-r,d,r,a((1-f/p)*h))}}},"object"==typeof module&&(module.exports=Stats),function(){function e(e){fe.fill(e,ee,ee+P)}function o(e,t,n){t|=0,n|=0,(e|=0)>0&&e<F&&t>0&&t<z&&(fe[ee+t*F+e]=n)}function a(e,t,n=ee){return fe[n+e+t*F]}function r(e,t,n,s,a){var r,i,f=(s|=0)-(t|=0),l=(n|=0)-(e|=0);if(f<0?(f=-f,i=-1):i=1,l<0?(l=-l,r=-1):r=1,f<<=1,l<<=1,o(e,t,a),l>f)for(var c=f-(l>>1);e!=n;)c>=0&&(t+=i,c-=l),c+=f,o(e+=r,t,a);else for(c=l-(f>>1);t!=s;)c>=0&&(e+=r,c-=f),c+=l,o(e,t+=i,a)}function f(e,t,n,s){var a=-n,r=0,i=2-2*n;do{o(e-a,t+r,s),o(e-r,t-a,s),o(e+a,t-r,s),o(e+r,t+a,s),(n=i)<=r&&(i+=2*++r+1),(n>a||i>r)&&(i+=2*++a+1)}while(a<0)}function l(e,t,n,o){if(!(n<0)){e|=0,t|=0,o|=0;var s=-(n|=0),a=0,i=2-2*n;do{r(e-s,t-a,e+s,t-a,o),r(e-s,t+a,e+s,t+a,o),(n=i)<=a&&(i+=2*++a+1),(n>s||i>a)&&(i+=2*++s+1)}while(s<0)}}function c(e,t,n,o,s){x1=0|e,y1=0|t,x2=e+n|0,y2=t+o|0;var a=Math.abs(y2-y1);if(r(x1,y1,x2,y1,s),a>0)for(;--a;)r(x1,y1+a,x2,y1+a,s);r(x1,y2,x2,y2,s)}function u(e,t,n,o,s,a){for(let r=0;r<=s;r++)c(e+r,t-r,n-2*r,o+2*r,a)}function d(e,t,n,o=n,s=n,a=n){for(let r=0;r<=F;r++)for(let i=0;i<=z;i++){let f=r-1+i*F,l=r+1+i*F,c=r+(i+1)*F,u=r+(i-1)*F;fe[e+(r+i*F)]&&(fe[e+f]||(fe[t+f]=n),fe[e+l]||(fe[t+l]=s),fe[e+u]||(fe[t+u]=o),fe[e+c]||(fe[t+c]=a))}}function _(e,t,n,o,s,a,r){var i=F,e=Math.round(16*e),n=Math.round(16*n),s=Math.round(16*s),t=Math.round(16*t),f=e-n,l=(o=Math.round(16*o))-t,c=n-s,u=(a=Math.round(16*a))-o,d=s-e,_=t-a,h=Math.max(Math.min(e,n,s)+15>>4,0),x=Math.min(Math.max(e,n,s)+15>>4,F),v=Math.max(Math.min(t,o,a)+15>>4,0),p=Math.min(Math.max(t,o,a)+15>>4,z);h&=-8,v&=-8;var m=-l*e-f*t,y=-u*n-c*o,g=-_*s-d*a;(l>0||0==l&&f>0)&&m++,(u>0||0==u&&c>0)&&y++,(_>0||0==_&&d>0)&&g++,m=m-1>>4,y=y-1>>4,g=g-1>>4;var w=0,R=0,A=0,I=0,B=0,S=0;f>=0?R-=7*f:w-=7*f,l>=0?R-=7*l:w-=7*l,c>=0?I-=7*c:A-=7*c,u>=0?I-=7*u:A-=7*u,d>=0?S-=7*d:B-=7*d,_>=0?S-=7*_:B-=7*_;for(var M=i-8,C=v;C<p;C+=8)for(var q=h;q<x;q+=8){var D=m+f*C+l*q,b=y+c*C+u*q,T=g+d*C+_*q;if(!(D<R||b<I||T<S)){var L=q+C*i;if(D>=w&&b>=A&&T>=B)for(E=0;E<8;E++){for(P=0;P<8;P++,L++)fe[ee+L]=r;L+=M}else for(var E=0;E<8;E++){for(var K=D,G=b,k=T,P=0;P<8;P++)(K|G|k)>=0&&(fe[ee+L]=r),K+=l,G+=u,k+=_,L++;D+=f,b+=c,T+=d,L+=M}}}}function h(e=0,t=0,n=384,o=256,s=0,a=0,r=!1,i=!1){for(var f=0;f<o;f++)for(var l=0;l<n;l++)a+f<z&&s+l<F&&a+f>-1&&s+l>-1&&(r&i?fe[te+((t+(o-f))*F+e+(n-l))]>0&&(fe[ee+((a+f)*F+s+l)]=oe[fe[te+((t+(o-f))*F+e+(n-l))]]):i&&!r?fe[te+((t+(o-f))*F+e+l)]>0&&(fe[ee+((a+f)*F+s+l)]=fe[te+((t+(o-f))*F+e+l)]):r&&!i?fe[te+((t+f)*F+e+(n-l))]>0&&(fe[ee+((a+f)*F+s+l)]=fe[te+((t+f)*F+e+(n-l))]):r||i||fe[te+((t+f)*F+e+l)]>0&&(fe[ee+((a+f)*F+s+l)]=oe[fe[te+((t+f)*F+e+l)]]))}function v(e,t,n,o,s,a,r,i){i*=.0174533;let f=n/2|0,l=o/2|0,c=n*r/2*1.41421356237|0,u=o*r/2*1.41421356237|0,d=-c,_=c,h=-u,x=u,v=1/r,p=Math.cos(-i)*v,m=Math.sin(-i)*v;for(let r=h;r<x;r++)for(let i=d;i<_;i++){let c=f+Math.round(p*i+m*r),u=l+Math.round(-m*i+p*r),d=i+s|0,_=r+a|0;c>=0&&u>=0&&c<n&&u<o&&fe[te+(c+e)+(u+t)*F]>0&&(fe[ee+d+_*F]=fe[te+(c+e)+(u+t)*F])}}function m(e,t,n,o,s,a,r){s=s||8,n/=a=a||8,o/=s;for(var i=0;i<s;++i)for(var f=0,l=a/2;f<l;++f)c(e+(2*f*n+(i%2?0:n)),i*o,n-1,o-1,r)}function g(){for(var e=P;e--;)ie[e]=ne[oe[fe[e]]];se.data.set(re),$.putImageData(se,0,0)}function w(){ee=Y,te=Y,c(8,10,17,9,8),c(7,11,19,7,8),c(9,12,15,5,2),c(11,14,2,1,16),c(21,14,2,1,16),r(12,15,13,15,21),r(22,15,23,15,21),r(17,9,17,6,5),o(17,6,21),c(44,15,3,1,5),c(42,17,7,7,5),c(43,21,5,5,0),l(139,28,5,13),c(74,22,2,5,8),l(75,28,3,8),f(75,28,1,5),_(107,19,114,27,117,23,8),c(206,10,4,12,9),d(Y,H,23,21,31,23),te=H,h(),te=Y,h(96,0,32,32,165,3),h(32,0,32,32,165,3),h(64,0,32,32,165,3),h(0,0,32,32,160,0)}function R(e){return Math.sin(6.283184*e)}function A(e){return.00390625*Math.pow(1.059463094,e-128)}function I(e,t){setTimeout(function(){var n=new Uint8Array(e*he*2),o=n.length-2,s=function(){for(var e=new Date,a=0;o>=0;)if(n[o]=0,n[o+1]=128,o-=2,(a+=1)%1e3==0&&new Date-e>xe)return void setTimeout(s,0);setTimeout(function(){t(n)},0)};setTimeout(s,0)},0)}function B(e,t,n,o,s){var a=n.fx_delay_time*o>>1,r=n.fx_delay_amt/255,i=0,f=function(){for(var n=new Date,o=0;i<t-a;){var l=4*i,c=4*(i+a),u=e[c]+(e[c+1]<<8)+(e[l+2]+(e[l+3]<<8)-32768)*r;if(e[c]=255&u,e[c+1]=u>>8&255,u=e[c+2]+(e[c+3]<<8)+(e[l]+(e[l+1]<<8)-32768)*r,e[c+2]=255&u,e[c+3]=u>>8&255,++i,(o+=1)%1e3==0&&new Date-n>xe)return void setTimeout(f,0)}setTimeout(s,0)};setTimeout(f,0)}function S(t){switch(ee=X,e(0),ee=U,e(0),ee=O,e(0),ee=Z,e(0),ee=J,e(0),ee=H,e(0),t){case me:currentRoom[0]--,currentRoom[0]<0&&(currentRoom[0]=Se),console.log(currentRoom);break;case ye:currentRoom[0]++,currentRoom[0]>Se&&(currentRoom[0]=0),console.log(currentRoom);break;case ge:currentRoom[1]--,currentRoom[1]<0&&(currentRoom[1]=Me),console.log(currentRoom);break;case we:currentRoom[1]++,currentRoom[1]>Me&&(currentRoom[1]=0),console.log(currentRoom)}ee=X,rooms[world[currentRoom[1]*(Se+1)+currentRoom[0]]].draw()}function M(e,t,s){for(ee=Z,u(e-4,t-4,40,100,23),n=p=i=0;p<2e3;i%2||o(e+p%23,t+p/23|0,s),p++)p^n||(n=p+(63&[..."F0AL1314B2C2B16001177AeBSB1SB1R11AREàBDCCB5CAM6A51CBCB513333ZAQAÜAQFMEWB5DCCBC4IA515CC613333ZAFBIAKBO3BJFEBFEJBMAHAH3AFBGAGB5FAJBCA5O6BMBCA5IB5F4FAH3AGBH2HBH2IAG34G4LBIBHBIACC17K4N3ELAD1C1B1B7F7CB7GACDCEBACI13CA6AF13FBAF13BF3B7cCEANC11C0117CI0AP1ANEPILCGCIBKBGB1I1BE6BG6BDAC1312D2B2B2HAC12LADADALAIAN71AK5E1BD"].map(e=>["AAAAAA","AA","ACA","AE","AGA","DB","BB","AB"][e]||e).join("").charCodeAt(i++)))}function C(){ee=Q,e(0);let t=5e3;for(;--t;)o(de.nextIntRange(0,384),de.nextIntRange(0,256),1);for(t=200;--t;)o(de.nextIntRange(0,384),de.nextIntRange(0,256),26);for(t=60;--t;)o(de.nextIntRange(0,384),de.nextIntRange(0,256),20);for(t=20;--t;)o(de.nextIntRange(0,384),de.nextIntRange(0,256),21);for(t=3;--t;)l(de.nextIntRange(0,384),de.nextIntRange(0,256),de.nextIntRange(2,5),de.nextIntRange(16,19))}function q(){let e=P;for(;--e;)fe[X+e]==Ae&&(te=Y,v(192,0,32,32,e%F-2,(e/F|0)-5,1,90*t))}function D(){te=X,ee=U,e(0);t=3e3;for(de.setSeed(1019);--t;){let e=de.nextIntRange(0,F),t=de.nextIntRange(0,z);a(e,t,X)==Re&&u(e+de.nextIntRange(-5,0),t+de.nextIntRange(-10,0),de.nextIntRange(0,15),de.nextIntRange(0,10),1,de.nextIntRange(22,24))}ee=O,e(0),d(U,O,25,20,26,2),ee=J,te=U,h(),te=O,h(),ee=U,e(0);var t=3e3;for(de.setSeed(1019);--t;){let e=de.nextIntRange(0,F),t=de.nextIntRange(0,z);fe[X+e+t*F]==Re&&u(e+de.nextIntRange(-5,0),t+de.nextIntRange(-10,0),de.nextIntRange(0,15),de.nextIntRange(0,10),1,de.nextIntRange(22,24))}ee=O,e(0),d(U,O,25,20,26,2),ee=J,te=U,h(),te=O,h()}function b(){ee=U,e(0);var t=1e3;for(de.setSeed(1019);--t;){let e=de.nextIntRange(0,F),t=de.nextIntRange(0,z);fe[X+e+t*F]==Re&&(c(e+de.nextIntRange(-5,0),t+de.nextIntRange(-20,0),de.nextIntRange(0,5),de.nextIntRange(0,20),de.nextIntRange(22,24)),l(e,t-10,2,de.nextIntRange(22,24)))}ee=O,e(0),d(U,O,25,20,26,2),ee=Z,te=U,h(),te=O,h()}function T(){let e=P;for(;--e;)fe[X+e]==Be&&(fe[J+e]=de.nextIntRange(2,4))}function L(){let e=P;for(;--e;)fe[X+e]==Ie&&(fe[J+e]=de.nextIntRange(9,11))}function E(e=0,t=0,n=10,o=10,a=21,r=!1){this.x=e,this.y=t,this.maxSize=n,this.speed=10,this.counter=this.speed,this.color=a,this.size=1,this.filled=r,s=this}function K(e){for(var t=e[0].length,n=0;n<t;n++){var s=[];s=k(e[0].charAt(n));for(var a=0;a<5;a++)for(var r=0;r<5;r++)1==s[5*a+r]&&(1==e[4]?o(e[1]+r*e[4]+(5*e[4]+e[3])*n,e[2]+a*e[4],e[5]):c(e[1]+r*e[4]+(5*e[4]+e[3])*n,e[2]+a*e[4],e[4],e[4],e[5]))}}function G(e){var t=5*e[7],n=e[0].split("\n"),o=n.slice(0),s=n.length,a=o.sort(function(e,t){return t.length-e.length})[0],r=a.length*t+(a.length-1)*e[3],i=s*t+(s-1)*e[4];e[5]||(e[5]="left"),e[6]||(e[6]="bottom");var f=e[1],l=e[2],c=e[1]+r,u=e[2]+i;"center"==e[5]?(f=e[1]-r/2,c=e[1]+r/2):"right"==e[5]&&(f=e[1]-r,c=e[1]),"center"==e[6]?(l=e[2]-i/2,u=e[2]+i/2):"bottom"==e[6]&&(l=e[2]-i,u=e[2]);for(var d=f+r/2,_=l+i/2,h=0;h<s;h++){var x=n[h],v=x.length*t+(x.length-1)*e[3],p=e[1],m=e[2]+(t+e[4])*h;"center"==e[5]?p=e[1]-v/2:"right"==e[5]&&(p=e[1]-v),"center"==e[6]?m-=i/2:"bottom"==e[6]&&(m-=i),K([x,p,m,e[3]||0,e[7]||1,e[8],e[9]])}return{sx:f,sy:l,cx:d,cy:_,ex:c,ey:u,width:r,height:i}}function k(e){return index=fontString.indexOf(e),fontBitmap.substring(25*index,25*index+25).split("")}const F=384,z=256,P=F*z,j=0,H=P,N=2*P,U=3*P,O=4*P,Y=5*P,X=6*P,J=7*P,Z=8*P,Q=9*P,W=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31];var V=document.getElementById("canvas"),$=V.getContext("2d"),ee=0,te=P,ne=[4278190080,4281606178,4282132549,4281416038,4282078863,4280709599,4284915929,4288332782,4281791227,4283491737,4281384554,4285436983,4281297227,4280568658,4281941042,4285808447,4286734384,4292963931,4294941539,4293184863,4294761419,4294967295,4290227611,4287069828,4285164137,4283586137,4287251062,4281479852,4284700633,4290411479,4283078543,4281364362],oe=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31];paldrk=[0,0,1,2,3,4,5,6,6,10,11,12,13,14,2,2,15,16,17,18,22,20,23,24,25,26,2,2,27,28,31,13],$.imageSmoothingEnabled=!1,$.mozImageSmoothingEnabled=!1,V.width=F,V.height=z;var se=$.getImageData(0,0,F,z),ae=new ArrayBuffer(se.data.length),re=new Uint8Array(ae),ie=new Uint32Array(ae),fe=new Uint8ClampedArray(F*z*10);Number.prototype.clamp=function(e,t){return Math.min(Math.max(this,e),t)},Number.prototype.map=function(e,t,n,o){return(this-e)/(t-e)*(o-n)+n};var le={rowLen:5513,endPattern:17,songData:[{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:128,osc1_waveform:2,osc2_oct:6,osc2_det:0,osc2_detune:9,osc2_xenv:0,osc2_vol:142,osc2_waveform:3,noise_fader:0,env_attack:137,env_sustain:2653,env_release:1979,env_master:155,fx_filter:3,fx_freq:1052,fx_resonance:154,fx_delay_time:6,fx_delay_amt:25,fx_pan_freq:8,fx_pan_amt:144,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:3,lfo_amt:69,lfo_waveform:0,p:[2,2,3,3,2,2,3,3,2,2,3,3,2,2,3,3],c:[{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[171,166,169,171,174,171,169,171,0,166,169,171,174,171,169,171,171,166,169,171,174,171,169,171,0,166,169,171,174,171,169,171]},{n:[169,164,167,169,172,169,167,169,0,164,167,169,172,169,167,169,169,164,167,169,172,169,167,169,0,164,167,169,172,169,167,169]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:116,osc1_waveform:1,osc2_oct:8,osc2_det:0,osc2_detune:8,osc2_xenv:0,osc2_vol:255,osc2_waveform:2,noise_fader:0,env_attack:351,env_sustain:4611,env_release:1403,env_master:199,fx_filter:2,fx_freq:200,fx_resonance:254,fx_delay_time:5,fx_delay_amt:12,fx_pan_freq:0,fx_pan_amt:214,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:0,lfo_amt:87,lfo_waveform:3,p:[1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2],c:[{n:[123,0,0,121,0,0,123,0,0,0,0,0,0,0,121,0,123,0,0,121,0,0,123,0,0,0,0,0,0,0,0,0]},{n:[121,0,0,119,0,0,121,0,0,0,0,0,0,0,119,0,121,0,0,119,0,0,121,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:6,osc1_det:0,osc1_detune:0,osc1_xenv:1,osc1_vol:162,osc1_waveform:0,osc2_oct:6,osc2_det:0,osc2_detune:0,osc2_xenv:1,osc2_vol:162,osc2_waveform:0,noise_fader:14,env_attack:50,env_sustain:150,env_release:8181,env_master:161,fx_filter:2,fx_freq:5900,fx_resonance:240,fx_delay_time:4,fx_delay_amt:33,fx_pan_freq:0,fx_pan_amt:0,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:0,lfo_amt:0,lfo_waveform:0,p:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[123,0,0,123,0,0,0,123,123,0,0,0,0,0,0,0,123,0,0,0,0,0,0,0,123,0,0,0,0,0,0,0]}]},{osc1_oct:8,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:0,osc1_waveform:0,osc2_oct:8,osc2_det:0,osc2_detune:0,osc2_xenv:0,osc2_vol:0,osc2_waveform:0,noise_fader:29,env_attack:50,env_sustain:419,env_release:4607,env_master:130,fx_filter:2,fx_freq:10332,fx_resonance:120,fx_delay_time:4,fx_delay_amt:16,fx_pan_freq:5,fx_pan_amt:108,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:5,lfo_amt:187,lfo_waveform:0,p:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[0,123,123,123,0,123,123,123,0,123,0,123,0,123,123,123,0,123,123,123,0,123,0,123,0,123,123,123,0,123,123,123]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:255,osc1_waveform:2,osc2_oct:7,osc2_det:0,osc2_detune:4,osc2_xenv:0,osc2_vol:154,osc2_waveform:2,noise_fader:0,env_attack:197,env_sustain:13163,env_release:10614,env_master:180,fx_filter:2,fx_freq:1792,fx_resonance:136,fx_delay_time:6,fx_delay_amt:81,fx_pan_freq:3,fx_pan_amt:151,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:0,lfo_amt:0,lfo_waveform:0,p:[1,2,3,4,5,2,3,4,5,2,3,4,5,2,3,4],c:[{n:[162,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,164,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[166,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,171,0,0,0,0,0,0,0,166,0,0,0,0,0,0,0]},{n:[164,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,162,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[164,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,169,0,0,0,0,0,0,0,0,0,0,0,167,0,0,0]},{n:[166,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,164,0,0,0,0,0,0,0,0,0,0,0,167,0,0,0]}]}],songLen:69},ce={rowLen:5513,endPattern:21,songData:[{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:191,osc1_waveform:1,osc2_oct:7,osc2_det:0,osc2_detune:0,osc2_xenv:0,osc2_vol:125,osc2_waveform:1,noise_fader:0,env_attack:200,env_sustain:2e3,env_release:2418,env_master:73,fx_filter:2,fx_freq:6620,fx_resonance:130,fx_delay_time:6,fx_delay_amt:48,fx_pan_freq:4,fx_pan_amt:0,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:0,lfo_amt:0,lfo_waveform:0,p:[1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],c:[{n:[137,0,140,0,144,0,147,0,137,0,140,0,144,0,147,0,137,0,140,0,144,0,147,0,137,0,140,0,144,0,147,0]},{n:[137,0,140,0,144,0,146,0,137,0,140,0,144,0,146,0,137,0,140,0,144,0,146,0,137,0,140,0,144,0,146,0]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:255,osc1_waveform:1,osc2_oct:7,osc2_det:0,osc2_detune:9,osc2_xenv:0,osc2_vol:154,osc2_waveform:1,noise_fader:0,env_attack:197,env_sustain:1776,env_release:1403,env_master:45,fx_filter:0,fx_freq:11025,fx_resonance:255,fx_delay_time:2,fx_delay_amt:65,fx_pan_freq:3,fx_pan_amt:47,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:0,lfo_amt:0,lfo_waveform:0,p:[1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],c:[{n:[125,0,0,123,0,0,125,0,0,0,0,0,0,0,123,0,125,0,0,123,0,0,125,0,0,0,0,0,0,0,0,0]},{n:[130,0,0,128,0,0,130,0,0,0,0,0,0,0,128,0,130,0,0,128,0,0,130,0,0,0,0,0,0,0,0,0]}]}],songLen:85},ue={osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:1,osc1_vol:117,osc1_waveform:3,osc2_oct:7,osc2_det:0,osc2_detune:0,osc2_xenv:1,osc2_vol:155,osc2_waveform:2,noise_fader:0,env_attack:7105,env_sustain:0,env_release:444,env_master:192,fx_filter:0,fx_freq:11025,fx_resonance:255,fx_delay_time:2,fx_delay_amt:16,fx_pan_freq:0,fx_pan_amt:0,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:0,lfo_amt:59,lfo_waveform:0};fontString="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890_!@#.'\"?/<()",fontBitmap="11111100011111110001100011111010001111101000111110111111000010000100000111111100100101000110001111101111110000111001000011111111111000011100100001000011111100001011110001111111000110001111111000110001111110010000100001001111111111000100001010010111101000110010111001001010001100001000010000100001111110001110111010110001100011000111001101011001110001011101000110001100010111011110100011001011100100000111010001100011001001111111101000111110100011000101111100000111000001111101111100100001000010000100100011000110001100010111010001100011000101010001001000110001101011010101110100010101000100010101000110001010100010000100001001111100010001000100011111001000110000100001000111001110100010001000100111111111000001001100000111110100101001011111000100001011111100001111000001111100111110000111101000101110111110000100010001000010001110100010111010001011100111010001011110000101110011101000110001100010111000000000000000000000111110010000100001000000000100111111000110111101011011101010111110101011111010100000000000000000000000100001100001000100000000000011011010011001000000000000111010001001100000000100000010001000100010001000000010001000100000100000100001000100001000010000010";var de={seed:Date.now(),a:1664525,c:1013904223,m:Math.pow(2,32),setSeed:function(e){this.seed=e},nextInt:function(){return this.seed=(this.seed*this.a+this.c)%this.m,this.seed},nextFloat:function(){return this.nextInt()/this.m},nextBool:function(e){return null==e&&(e=.5),this.nextFloat()<e},nextFloatRange:function(e,t){return e+this.nextFloat()*(t-e)},nextIntRange:function(e,t){return Math.floor(this.nextFloatRange(e,t))},nextColor:function(){for(var e=this.nextIntRange(0,Math.pow(2,24)).toString(16).toUpperCase();e.length<6;)e="0"+e;return"#"+e}},_e={},he=2,xe=33,ve=null,pe=[R,function(e){return R(e)<0?-1:1},function(e){return e%1-.5},function(e){var t=e%1*4;return t<2?t-1:3-t}];_e.AudioGenerator=function(e){this.mixBuf=e,this.waveSize=e.length/he/2},_e.AudioGenerator.prototype.getAudioBuffer=function(e){null===ve&&(ve=new AudioContext);var t=this.mixBuf,n=this.waveSize*he*2,o=ve.createBuffer(he,this.waveSize,44100),s=o.getChannelData(0),a=o.getChannelData(1),r=0,i=function(){for(var f=new Date,l=0;r<n/2;){var c=4*(t[4*r]+(t[4*r+1]<<8)-32768);if(c=c<-32768?-32768:c>32767?32767:c,s[r]=c/32768,c=4*(t[4*r+2]+(t[4*r+3]<<8)-32768),c=c<-32768?-32768:c>32767?32767:c,a[r]=c/32768,r+=1,(l+=1)%1e3==0&&new Date-f>xe)return void setTimeout(i,0)}setTimeout(function(){e(o)},0)};setTimeout(i,0)},_e.SoundGenerator=function(e,t){this.instr=e,this.rowLen=t||5605,this.osc_lfo=pe[e.lfo_waveform],this.osc1=pe[e.osc1_waveform],this.osc2=pe[e.osc2_waveform],this.attack=e.env_attack,this.sustain=e.env_sustain,this.release=e.env_release,this.panFreq=Math.pow(2,e.fx_pan_freq-8)/this.rowLen,this.lfoFreq=Math.pow(2,e.lfo_freq-8)/this.rowLen},_e.SoundGenerator.prototype.genSound=function(e,t,n){new Date;for(var o=0,s=0,a=A(e+12*(this.instr.osc1_oct-8)+this.instr.osc1_det)*(1+8e-4*this.instr.osc1_detune),r=A(e+12*(this.instr.osc2_oct-8)+this.instr.osc2_det)*(1+8e-4*this.instr.osc2_detune),i=this.instr.fx_resonance/255,f=0,l=0,c=this.attack+this.sustain+this.release-1;c>=0;--c){var u=c+n,d=this.osc_lfo(u*this.lfoFreq)*this.instr.lfo_amt/512+.5,_=1;c<this.attack?_=c/this.attack:c>=this.attack+this.sustain&&(_-=(c-this.attack-this.sustain)/this.release);var h=a;this.instr.lfo_osc1_freq&&(h+=d),this.instr.osc1_xenv&&(h*=_*_),o+=h;var x=this.osc1(o)*this.instr.osc1_vol;h=r,this.instr.osc2_xenv&&(h*=_*_),s+=h,x+=this.osc2(s)*this.instr.osc2_vol,this.instr.noise_fader&&(x+=(2*Math.random()-1)*this.instr.noise_fader*_),x*=_/255;var v=this.instr.fx_freq;this.instr.lfo_fx_freq&&(v*=d);var p=i*(x-l)-(f+=(v=1.5*Math.sin(3.141592*v/44100))*l);switch(l+=v*p,this.instr.fx_filter){case 1:x=p;break;case 2:x=f;break;case 3:x=l;break;case 4:x=f+p}if(h=R(u*this.panFreq)*this.instr.fx_pan_amt/512+.5,x*=39*this.instr.env_master,(u*=4)+3<t.length){var m=t[u]+(t[u+1]<<8)+x*(1-h);t[u]=255&m,t[u+1]=m>>8&255,m=t[u+2]+(t[u+3]<<8)+x*h,t[u+2]=255&m,t[u+3]=m>>8&255}}},_e.SoundGenerator.prototype.getAudioGenerator=function(e,t){var n=this.attack+this.sustain+this.release-1+32*this.rowLen,o=this;I(n,function(s){o.genSound(e,s,0),B(s,n,o.instr,o.rowLen,function(){t(new _e.AudioGenerator(s))})})},_e.SoundGenerator.prototype.createAudioBuffer=function(e,t){this.getAudioGenerator(e,function(e){e.getAudioBuffer(t)})},_e.MusicGenerator=function(e){this.song=e,this.waveSize=44100*e.songLen},_e.MusicGenerator.prototype.generateTrack=function(e,t,n){var o=this;I(this.waveSize,function(s){var a=o.waveSize,r=o.waveSize*he*2,i=o.song.rowLen,f=o.song.endPattern,l=new _e.SoundGenerator(e,i),c=0,u=0,d=0,_=function(){for(var t=new Date;;)if(32!==d){if(u===f-1)return void setTimeout(h,0);var n=e.p[u];if(n){var o=e.c[n-1].n[d];o&&l.genSound(o,s,c)}if(c+=i,d+=1,new Date-t>xe)return void setTimeout(_,0)}else d=0,u+=1},h=function(){B(s,a,e,i,v)},x=0,v=function(){for(var e=new Date,o=0;x<r;){var a=t[x]+(t[x+1]<<8)+s[x]+(s[x+1]<<8)-32768;if(t[x]=255&a,t[x+1]=a>>8&255,x+=2,(o+=1)%1e3==0&&new Date-e>xe)return void setTimeout(v,0)}setTimeout(n,0)};setTimeout(_,0)})},_e.MusicGenerator.prototype.getAudioGenerator=function(e){var t=this;I(this.waveSize,function(n){var o=0,s=function(){o<t.song.songData.length?(o+=1,t.generateTrack(t.song.songData[o-1],n,s)):e(new _e.AudioGenerator(n))};s()})},_e.MusicGenerator.prototype.createAudioBuffer=function(e){this.getAudioGenerator(function(t){t.getAudioBuffer(e)})},states={},init=(()=>{sounds={},soundsLoaded=0,totalSounds=3,score=0,fuelTimer=100,parts=0,last=0,dt=0,now=0,t=0,state="menu",splodes=[],paused=!1,transition=!1,s_titleSong=!1,s_gameSong=!1,s_jump=!1,ve=new AudioContext,w(),player.init(),stats=new Stats,document.body.appendChild(stats.dom),loop()}),window.addEventListener("keyup",function(e){Key.onKeyup(e)},!1),window.addEventListener("keydown",function(e){Key.onKeydown(e)},!1),window.addEventListener("blur",function(e){paused=!0},!1),window.addEventListener("focus",function(e){paused=!1},!1),loop=(e=>{if(stats.begin(),paused)oe=paldrk,G(["PAUSED",192,128,1,1,1,"center",1,21,0]);else{oe=W;let e=(new Date).getTime();dt=Math.min(1,(e-last)/1e3),t+=dt,states[state].step(dt),last=e,states[state].render()}g(),stats.end(),requestAnimationFrame(loop)}),world=[8,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,2,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,8,7,6,6,8,6,6,6];const me=1,ye=2,ge=3,we=4,Re=21,Ae=8,Ie=9,Be=4,Se=9,Me=5;currentRoom=[0,0],rooms=[{draw:function(e){C(),D(),b()}},{draw:function(e){l(192,128,50,Re),C(),D(),b()}},{draw:function(e){f(192,128,64,Re),C(),D(),b()}},{draw:function(e){c(0,0,127,256,Re),c(250,0,127,256,Re),C(),D(),b()}},{draw:function(e){c(0,0,127,256,Re),c(250,0,127,256,Re),C(),D(),b()}},{draw:function(e){}},{draw:function(e){c(0,205,384,100,Re),c(0,150,100,100,Be),c(300,150,100,100,Ie);let t=100;for(;--t;)x=de.nextIntRange(0,F),y=de.nextIntRange(100,200),o(x,y,Ae);C(),T(),L(),D(),b()}},{draw:function(e){_(0,256,384,256,182,205,Re),c(100,70,20,80,Re),c(100,140,100,20,Re),c(200,820,10,100,Re),c(210,70,100,100,Re),C(),D(),b()}},{draw:function(e){c(0,205,384,10,Re),l(250,150,64,Re),o(50,180,Ae),C(),D(),b(),M(245,110,25)}}],player={init(){this.x=192,this.y=30,this.radius=8,this.xvel=0,this.yvel=0,this.xspeed=100,this.yspeed=100,this.drag=.8,this.gravity=8,this.maxYvel=400,this.maxXvel=200,this.minYvel=-400,this.minXvel=-200,this.b={},this.facingLeft=!1,this.jumping=!0,this.angle=0},update(e){this.updateB(),this.oldX=this.x,this.oldY=this.y,this.xvel*=player.drag,this.yvel+=player.gravity,this.yvel=this.yvel.clamp(this.minYvel,this.maxYvel),this.xvel=this.xvel.clamp(this.minXvel,this.maxXvel);let t=e*player.xvel,n=e*player.yvel;player.x+=t,this.updateB(),this.collides()&&(player.x=player.oldX,player.xvel=.4*-player.xvel),player.y+=n,this.updateB(),this.collides()&&(player.y=player.oldY,player.yvel=.4*-player.yvel),this.updateB(),this.collides()&&(this.x+=this.collideResolutionX(),this.updateB(),this.collides()&&(this.y+=this.collideResolutionY(),this.updateB())),this.overlapResolution(),this.updateB(),(Key.isDown(Key.d)||Key.isDown(Key.RIGHT))&&(player.facingLeft=!1,this.jumping?player.xvel=player.xspeed:player.xvel=0),(Key.isDown(Key.a)||Key.isDown(Key.LEFT))&&(this.facingLeft=!0,this.jumping?player.xvel=-player.xspeed:player.xvel=0),(Key.isDown(Key.w)||Key.isDown(Key.UP))&&!this.jumping&&fuelTimer>0&&(this.jumping=!0,s_jump=!0,player.yvel=-player.yspeed),player.angle-=player.xvel/30,player.jumping&&(player.angle-=player.facingLeft?-player.yvel/30:player.yvel/30),player.x>F&&(player.x=0,S(ye)),player.x<0&&(player.x=F,S(me)),player.y>z&&(player.y=0,S(we)),player.y<0&&(player.y=z,S(ge))},draw(e){te=Y,ee=H,v(0,0,32,32,player.x,player.y,1,player.angle)},collides(){for(var e=-this.radius;e<this.radius;e++)for(var t=-this.radius;t<this.radius;t++){let n=fe[X+(this.b.x+e)+(this.b.y+t)*F];if(n==Re||n==Be||n==Ie)return player.jumping=!1,!0}return!1},overlaps(){for(var e=-this.radius;e<this.radius;e++)for(var t=-this.radius;t<this.radius;t++){let n=fe[X+(this.b.x+e)+(this.b.y+t)*F];if(n)return{x:this.b.x+e,y:this.b.y+t,o:n}}return!1},updateB(){this.b={left:this.x-this.radius|0,right:this.x+this.radius|0,top:this.y-this.radius|0,bottom:this.y+this.radius|0,width:2*this.radius,height:2*this.radius,x:0|this.x,y:0|this.y}},collideResolutionY(e){let t=0,n=this.b;for(let e=n.left;e<=n.right;e++){let o=fe[X+e+F*n.bottom];if(o==Re||o==Be||o==Ie)for(let o=n.bottom;o>=n.top;o--){let s=fe[X+e+F*o];s!=Re&&s!=Be&&s!=Ie||(t=o-n.bottom-1)}}for(let e=n.left;e<=n.right;e++){let o=fe[X+e+F*n.top];if(o==Re||o==Be||o==Ie)for(let o=n.top;o<=n.bottom;o++){let s=fe[X+e+F*o];s!=Re&&s!=Be&&s!=Ie||(t=o-n.top+1)}}return t},collideResolutionX(e){let t=0,n=this.b;for(let e=n.top;e<=n.bottom;e++){let o=fe[X+n.left+F*e];if(o==Re||o==Be||o==Ie)for(let o=n.x;o<=n.right;o++){let n=fe[X+o+F*e];n!=Re&&n!=Be&&n!=Ie||t++}else{let o=fe[X+n.right+F*e];if(o==Re||o==Be||o==Ie)for(let o=n.x;o>=n.left;o--){let n=fe[X+o+F*e];n!=Re&&n!=Be&&n!=Ie||t--}}}return t},overlapResolution(e){let t=player.overlaps();switch(t.o){case Ae:fe[X+t.x+t.y*F],ee=X,l(t.x,t.y,3,0),ee=H,splodes.push(new E(t.x,t.y)),fuelTimer+=.5}}},E.prototype.draw=function(){++this.size>this.maxSize||(this.filled?l(this.x,this.y,this.size,this.color):f(this.x,this.y,this.size,this.color),0==--this.counter&&(this.size++,this.counter=this.speed))},function(e=0,t=0,n=10,o=10,a=21,r=!1){this.x=e,this.y=t,this.maxSize=n,this.speed=10,this.counter=this.speed,this.color=a,this.size=1,this.filled=r,s=this}.prototype.draw=function(){++this.size>this.maxSize||(this.filled?l(this.x,this.y,this.size,this.color):f(this.x,this.y,this.size,this.color),0==--this.counter&&(this.size++,this.counter=this.speed))},states.gameover={step:function(e){Key.isDown(Key.r)&&(state="menu")},render:function(t){ee=0,e(0),G(["CRITICAL SYSTEM\nFAILURE",192,80,8,15,"center","top",3,27])}},states.menu={step:function(e){Key.justReleased(Key.p)&&(S(),state="game"),Key.justReleased(Key.r)&&(state="spritesheet")},render:function(n){ee=X,e(0),ee=0,e(0),ee=H,e(0),ee=U,e(0),ee=j,e(0),ee=X,G(["GREEBLE",F/2,150,20,20,"center","top",6,25]),ee=H,te=X,h(),ee=O,de.setSeed(21);for(s=6e3;--s;){let e=de.nextIntRange(0,F),t=de.nextIntRange(0,z);fe[X+e+t*F]&&c(e+de.nextIntRange(-2,2),t+de.nextIntRange(-1,1),1,de.nextIntRange(0,3),de.nextIntRange(24,25))}d(O,U,25,20,23,18),ee=H,te=O,h(),te=U,h(),ee=O,de.setSeed(20);for(var s=6e3;--s;){let e=de.nextIntRange(0,F),t=de.nextIntRange(0,z);fe[X+e+t*F]&&c(e+de.nextIntRange(-1,1),t+de.nextIntRange(0,1),de.nextIntRange(1,5),1,de.nextIntRange(22,24))}d(O,U,25,20,23,18),ee=H,te=O,h(),te=U,h(),player.draw(),te=Y;let a=8;for(;--a;)h(0,0,25,36,192+25*a,40);v(1,1,25,36,64,64,1,45),G(["PRESS P TO CONTINUE",F/2,230,2,2,"center","top",1,21]),ee=j;for(r=8e3;--r;)o((de.nextIntRange(0,384)+10*t|0)%384,de.nextIntRange(0,256),1);for(r=400;--r;)o((de.nextIntRange(0,384)+20*t|0)%384,de.nextIntRange(0,256),26);for(var r=100;--r;)o((de.nextIntRange(0,384)+30*t|0)%384,de.nextIntRange(0,256),21);d(H,j,15),te=H,h()}},states.game={step(e){Key.justReleased(Key.f)&&(state="gameover"),player.update(e),fuelTimer-=e},render(t){if(ee=j,e(0),te=Q,h(),ee=H,e(0),q(),te=J,h(),player.draw(),te=Z,h(),ee=j,fuelTimer)if(fuelTimer>20)te=H,h(),te=N,h();else{ee=j,e(0);let t=1e3;for(;t--;)o(Math.random()*F,Math.random()*z,2);d(H,j,9)}else{ee=j,e(0);let t=2e3;for(;t--;){let e=Math.random()*F|0,t=Math.random()*z|0;f(e,t,1,fe[H+e+t*F]?27:0)}}ee=j,G([fuelTimer.toFixed(2).toString(),F/2,10,2,2,"center","top",1,9]),splodes.forEach(function(e){e.draw()})}},states.loading={init:function(e){var t=new _e.MusicGenerator(le);t.createAudioBuffer(function(e){sounds.titleMusic=e,soundsLoaded++}),(t=new _e.MusicGenerator(ce)).createAudioBuffer(function(e){sounds.gameMusic=e,soundsLoaded++}),new _e.SoundGenerator(ue).createAudioBuffer(147,function(e){ve.createBufferSource();sounds.jump=e,soundsLoaded++})},step:function(e){Key.justReleased(Key.z)&&(state="menu")},render:function(t){ee=j,e(0),G(soundsLoaded!=totalSounds?["LOADING...",F/2,128,2,2,"center","top",2,9]:["PRESS Z TO CONTINUE",F/2,128,2,2,"center","top",2,9])}},states.spritesheet={step:function(e){Key.justReleased(Key.x)&&(S(),state="menu")},render:function(n){ee=j,e(0),m(0,0,384,256,8,12,1),te=Y,h(),h(0,0,22,34,300,100),v(0,0,32,32,16,112,1,15+90*t),v(32,0,32,32,48,112,1,15+90*t),v(64,0,32,32,80,112,1,15+90*t);for(var o=0;o<32;o++)G([o.toString(),o<16?3+16*o:3+16*(o-16),o<16?200:216,1,1,1,"left",1,o,0])}},Key={_pressed:{},_released:{},LEFT:37,UP:38,RIGHT:39,DOWN:40,SPACE:32,a:65,w:87,s:83,d:68,z:90,x:88,f:70,p:80,r:82,isDown(e){return this._pressed[e]},justReleased(e){return this._released[e]},onKeydown(e){this._pressed[e.keyCode]=!0},onKeyup(e){this._released[e.keyCode]=!0,delete this._pressed[e.keyCode]},update(){this._released={}}},window.onload=init()}();